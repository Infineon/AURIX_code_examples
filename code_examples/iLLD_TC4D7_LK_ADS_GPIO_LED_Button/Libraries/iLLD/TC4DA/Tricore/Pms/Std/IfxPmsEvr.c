/**
 * \file IfxPmsEvr.c
 * \brief PMS  basic functionality
 *
 * \version iLLD-TC4-v2.1.1
 * \copyright Copyright (c) 2024 Infineon Technologies AG. All rights reserved.
 *
 *
 *
 *                                 IMPORTANT NOTICE
 *
 * Use of this file is subject to the terms of use agreed between (i) you or
 * the company in which ordinary course of business you are acting and (ii)
 * Infineon Technologies AG or its licensees. If and as long as no such terms
 * of use are agreed, use of this file is subject to following:
 *
 * Boost Software License - Version 1.0 - August 17th, 2003
 *
 * Permission is hereby granted, free of charge, to any person or organization
 * obtaining a copy of the software and accompanying documentation covered by
 * this license (the "Software") to use, reproduce, display, distribute,
 * execute, and transmit the Software, and to prepare derivative works of the
 * Software, and to permit third-parties to whom the Software is furnished to
 * do so, all subject to the following:
 *
 * The copyright notices in the Software and this entire statement, including
 * the above license grant, this restriction and the following disclaimer, must
 * be included in all copies of the Software, in whole or in part, and all
 * derivative works of the Software, unless such copies or derivative works are
 * solely in the form of machine-executable object code generated by a source
 * language processor.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NON-INFRINGEMENT. IN NO EVENT
 * SHALL THE COPYRIGHT HOLDERS OR ANYONE DISTRIBUTING THE SOFTWARE BE LIABLE
 * FOR ANY DAMAGES OR OTHER LIABILITY, WHETHER IN CONTRACT, TORT OR OTHERWISE,
 * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE.
 *
 *
 */

/******************************************************************************/
/*----------------------------------Includes----------------------------------*/
/******************************************************************************/

#include "IfxPmsEvr.h"

/******************************************************************************/
/*-----------------------Exported Variables/Constants-------------------------*/
/******************************************************************************/

IFX_CONST IfxPmsEvr_StepDownRegulatorRegConfig IfxPmsEvr_cfgPhase1Default[] = {
    {&PMS_EVRC_CON2.U,   (0x33C29F0U),  (0xFFFFFFFFU)},
    {&PMS_EVRC_CON3.U,   (0x1200U),     (0xFFFFFFFFU)},
    {&PMS_EVRC_CON4.U,   (0x61U),       (0xFFFFFFFFU)},
    {&PMS_EVRC_COEFF2.U, (0x02F7EFFDU), (0xFFFFFFFFU)},
    {&PMS_EVRC_COEFF3.U, (0x24F7CFAFU), (0xFFFFFFFFU)},
    {&PMS_EVRC_COEFF4.U, (0x00434643U), (0xFFFFFFFFU)},
    {&PMS_EVRC_COEFF5.U, (0x0000FFFFU), (0xFFFFFFFFU)}
};

IFX_CONST IfxPmsEvr_StepDownRegulatorRegConfig IfxPmsEvr_cfgPhase2Default[] = {
    {&PMS_EVRC_CON1.U,   (0x098A007DU), (0xFFFFFFFFU)},
    {&PMS_EVRC_CON4.U,   (0x000000B1U), (0xFFFFFFFFU)},
    {&PMS_EVRC_COEFF1.U, (0x09C01EB8U), (0xFFFFFFFFU)},
    {&PMS_EVRC_COEFF0.U, (0x8483C014U), (0xFFFFFFFFU)},
};

IFX_CONST IfxPmsEvr_StepDownRegulatorRegConfig IfxPmsEvr_cfgPhase3Default[] = {
    {&PMS_EVRC_CON1.U,   (0x098A007DU), (0xFFFFFFFFU)},
    {&PMS_EVRC_COEFF0.U, (0x96AAB003U), (0xFFFFFFFFU)},
    {&PMS_EVRC_COEFF1.U, (0x0A300A86U), (0xFFFFFFFFU)},
};

IFX_CONST IfxPmsEvr_InitSequencePhase          IfxPmsEvr_cfgPhasesDefault[] = {
    {
        sizeof(IfxPmsEvr_cfgPhase1Default) / sizeof(IfxPmsEvr_StepDownRegulatorRegConfig),
        IfxPmsEvr_cfgPhase1Default,
        (30U)
    },
    {
        sizeof(IfxPmsEvr_cfgPhase2Default) / sizeof(IfxPmsEvr_StepDownRegulatorRegConfig),
        IfxPmsEvr_cfgPhase2Default,
        (20U)
    },
    {
        sizeof(IfxPmsEvr_cfgPhase3Default) / sizeof(IfxPmsEvr_StepDownRegulatorRegConfig),
        IfxPmsEvr_cfgPhase3Default,
        (30U)
    }
};

IFX_CONST IfxPmsEvr_InitSequence               IfxPmsEvr_cfgSequenceDefault = {
    sizeof(IfxPmsEvr_cfgPhasesDefault) / sizeof(IfxPmsEvr_InitSequencePhase),
    IfxPmsEvr_cfgPhasesDefault
};

IFX_CONST IfxPmsEvr_StepDownRegulatorRegConfig IfxPmsEvr_checkRegValuesDefault[] = {
    {&PMS_EVRC_CON2.U,   (0x33C29F0U),  (0xFFFFFFFFU)},
    {&PMS_EVRC_CON3.U,   (0x1200U),     (0xFFFFFFFFU)},
    {&PMS_EVRC_CON4.U,   (0x000000B1U), (0xFFFFFFFFU)},
    {&PMS_EVRC_COEFF2.U, (0x02F7EFFDU), (0xFFFFFFFFU)},
    {&PMS_EVRC_COEFF3.U, (0x24F7CFAFU), (0xFFFFFFFFU)},
    {&PMS_EVRC_COEFF4.U, (0x00434643U), (0xFFFFFFFFU)},
    {&PMS_EVRC_COEFF5.U, (0x0000FFFFU), (0xFFFFFFFFU)},
    {&PMS_EVRC_CON1.U,   (0x098A007DU), (0xFFFFFFFFU)},
    {&PMS_EVRC_COEFF1.U, (0x0A300A86U), (0xFFFFFFFFU)},
    {&PMS_EVRC_COEFF0.U, (0x96AAB003U), (0xFFFFFFFFU)},
};

IFX_CONST IfxPmsEvr_RegConfig                  IfxPmsEvr_defaultSecondaryMonitorRegConfig[] = {
    {&(PMS_VMONS_VDDCON.U),       0x1EF9597}, /*vdd*/
    {&(PMS_VMONS_VDDEXTCON.U),    0x1F7F405}, /*vddext*/
    {&(PMS_VMONS_VDDEXTDCCON.U),  0x13E1101}, /*vddextdc*/
    {&(PMS_VMONS_VDDEVRSBCON.U),  0x1F7F405}, /*vddevrsb*/
    {&(PMS_VMONS_VDDMCON.U),      0x1F7F405}, /*vddm*/
    {&(PMS_VMONS_VDDPHPHY0CON.U), 0x1595231}, /*vddphphy0*/
    {&(PMS_VMONS_VDDPHPHY1CON.U), 0x1595231}, /*vddphphy1*/
    {&(PMS_VMONS_VDDPPUCON.U),    0x1EF9597}, /*vddppu*/
    {&(PMS_VMONS_VDDPHY0CON.U),   0x1EF9597}, /*vddphy0*/
    {&(PMS_VMONS_VDDPHY1CON.U),   0x1EF9597}, /*vddphy1*/
    {&(PMS_VMONS_VDDPMS0CON.U),   0x1F01542}, /*vddpms0*/
    {&(PMS_VMONS_VDDPMS1CON.U),   0x1FB3542}, /*vddpms1*/
    {&(PMS_VMONS_VDDPMS2CON.U),   0x1FB3542}, /*vddpms2*/
    {&(PMS_VMONS_VDDLMU0CON.U),   0x1F85597}, /*vddlmu0*/
    {&(PMS_VMONS_VDDLMU1CON.U),   0x1F85597}, /*vddlmu1*/
    {&(PMS_VMONS_VDDPHPHY2CON.U), 0x1595231}, /*vddphphy2*/
    {&(PMS_VMONS_VDDPHY2CON.U),   0x1EF9597}, /*vddphy2*/
    {&(PMS_VMONS_VDDHSIFCON.U),   0x1A3B231}, /*vddhsif*/
    {&(PMS_VMONS_VDDSBRAMCON.U),  0x1EB355C}, /*vddsbram*/
    {&(PMS_VMONS_VDDPADCON.U),    0x1EF9597}, /*vddpad*/
};

IFX_CONST IfxPmsEvr_SecMonSupplyRailsConfig    IfxPmsEvr_defaultSecondaryMonitorSupplyConfig = {
    IfxPmsEvr_defaultSecondaryMonitorRegConfig,
    sizeof(IfxPmsEvr_defaultSecondaryMonitorRegConfig) / sizeof(IfxPmsEvr_RegConfig)
};

IFX_CONST IfxPmsEvr_CheckRegConfig             IfxPmsEvr_verifyRegCfgDefault = {
    sizeof(IfxPmsEvr_checkRegValuesDefault) / sizeof(IfxPmsEvr_StepDownRegulatorRegConfig),
    IfxPmsEvr_checkRegValuesDefault
};

/******************************************************************************/
/*-------------------------Function Implementations---------------------------*/
/******************************************************************************/

void IfxPmsEvr_configureSecondaryMonitor(Ifx_PMS *pms, IfxPmsEvr_SecondaryMonitorVoltageSource source, IfxPmsEvr_SecondaryMonitorConfig *config)
{
    Ifx_PMS_VMONS temp;
#if (IFX_PROT_ENABLED == 1U)
    IfxApProt_setState((Ifx_PROT_PROT *)&(pms->PROTE), IfxApProt_State_config);
#endif

    switch (source)
    {
    case IfxPmsEvr_SecondaryMonitorVoltageSource_vdd:
        temp.VDDCON.B.UVVAL  = (uint16)(config->underVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDCON.B.UVMOD  = (config->underVoltageMode);
        temp.VDDCON.B.OVVAL  = (uint16)(config->overVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDCON.B.OVMOD  = (config->overVoltageMode);
        temp.VDDCON.B.FILTER = (config->filter);
        pms->VMONS.VDDCON.U  = temp.VDDCON.U;
        break;
    case IfxPmsEvr_SecondaryMonitorVoltageSource_vddext:
        temp.VDDEXTCON.B.UVVAL  = (uint16)(config->underVoltage / IFXPMSEVR_VMONSADC_VDDEXT_VDDEVRSB_VDDM_HSIF_PHPHY012_FLEX_LSBMV);
        temp.VDDEXTCON.B.UVMOD  = (config->underVoltageMode);
        temp.VDDEXTCON.B.OVVAL  = (uint16)(config->overVoltage / IFXPMSEVR_VMONSADC_VDDEXT_VDDEVRSB_VDDM_HSIF_PHPHY012_FLEX_LSBMV);
        temp.VDDEXTCON.B.OVMOD  = (config->overVoltageMode);
        temp.VDDEXTCON.B.FILTER = (config->filter);
        pms->VMONS.VDDEXTCON.U  = temp.VDDEXTCON.U;
        break;
    case IfxPmsEvr_SecondaryMonitorVoltageSource_vddextdc:
        temp.VDDEXTDCCON.B.UVVAL  = (uint16)(config->underVoltage / IFXPMSEVR_VMONSADC_VDDEXTDC_LSBMV);
        temp.VDDEXTDCCON.B.UVMOD  = (config->underVoltageMode);
        temp.VDDEXTDCCON.B.OVVAL  = (uint16)(config->overVoltage / IFXPMSEVR_VMONSADC_VDDEXTDC_LSBMV);
        temp.VDDEXTDCCON.B.OVMOD  = (config->overVoltageMode);
        temp.VDDEXTDCCON.B.FILTER = (config->filter);
        pms->VMONS.VDDEXTDCCON.U  = temp.VDDEXTDCCON.U;
        break;
    case IfxPmsEvr_SecondaryMonitorVoltageSource_vddevrsb:
        temp.VDDEVRSBCON.B.UVVAL  = (uint16)(config->underVoltage / IFXPMSEVR_VMONSADC_VDDEXT_VDDEVRSB_VDDM_HSIF_PHPHY012_FLEX_LSBMV);
        temp.VDDEVRSBCON.B.UVMOD  = (config->underVoltageMode);
        temp.VDDEVRSBCON.B.OVVAL  = (uint16)(config->overVoltage / IFXPMSEVR_VMONSADC_VDDEXT_VDDEVRSB_VDDM_HSIF_PHPHY012_FLEX_LSBMV);
        temp.VDDEVRSBCON.B.OVMOD  = (config->overVoltageMode);
        temp.VDDEVRSBCON.B.FILTER = (config->filter);
        pms->VMONS.VDDEVRSBCON.U  = temp.VDDEVRSBCON.U;
        break;
    case IfxPmsEvr_SecondaryMonitorVoltageSource_vddm:
        temp.VDDMCON.B.UVVAL  = (uint16)(config->underVoltage / IFXPMSEVR_VMONSADC_VDDEXT_VDDEVRSB_VDDM_HSIF_PHPHY012_FLEX_LSBMV);
        temp.VDDMCON.B.UVMOD  = (config->underVoltageMode);
        temp.VDDMCON.B.OVVAL  = (uint16)(config->overVoltage / IFXPMSEVR_VMONSADC_VDDEXT_VDDEVRSB_VDDM_HSIF_PHPHY012_FLEX_LSBMV);
        temp.VDDMCON.B.OVMOD  = (config->overVoltageMode);
        temp.VDDMCON.B.FILTER = (config->filter);
        pms->VMONS.VDDMCON.U  = temp.VDDMCON.U;
        break;
    case IfxPmsEvr_SecondaryMonitorVoltageSource_vddphphy0:
        temp.VDDPHPHY0CON.B.UVVAL  = (uint16)(config->underVoltage / IFXPMSEVR_VMONSADC_VDDEXT_VDDEVRSB_VDDM_HSIF_PHPHY012_FLEX_LSBMV);
        temp.VDDPHPHY0CON.B.UVMOD  = (config->underVoltageMode);
        temp.VDDPHPHY0CON.B.OVVAL  = (uint16)(config->overVoltage / IFXPMSEVR_VMONSADC_VDDEXT_VDDEVRSB_VDDM_HSIF_PHPHY012_FLEX_LSBMV);
        temp.VDDPHPHY0CON.B.OVMOD  = (config->overVoltageMode);
        temp.VDDPHPHY0CON.B.FILTER = (config->filter);
        pms->VMONS.VDDPHPHY0CON.U  = temp.VDDPHPHY0CON.U;
        break;
    case IfxPmsEvr_SecondaryMonitorVoltageSource_vddphphy1:
        temp.VDDPHPHY1CON.B.UVVAL  = (uint16)(config->underVoltage / IFXPMSEVR_VMONSADC_VDDEXT_VDDEVRSB_VDDM_HSIF_PHPHY012_FLEX_LSBMV);
        temp.VDDPHPHY1CON.B.UVMOD  = (config->underVoltageMode);
        temp.VDDPHPHY1CON.B.OVVAL  = (uint16)(config->overVoltage / IFXPMSEVR_VMONSADC_VDDEXT_VDDEVRSB_VDDM_HSIF_PHPHY012_FLEX_LSBMV);
        temp.VDDPHPHY1CON.B.OVMOD  = (config->overVoltageMode);
        temp.VDDPHPHY1CON.B.FILTER = (config->filter);
        pms->VMONS.VDDPHPHY1CON.U  = temp.VDDPHPHY1CON.U;
        break;
    case IfxPmsEvr_SecondaryMonitorVoltageSource_vddhsif:
        temp.VDDHSIFCON.B.UVVAL  = (uint16)(config->underVoltage / IFXPMSEVR_VMONSADC_VDDEXT_VDDEVRSB_VDDM_HSIF_PHPHY012_FLEX_LSBMV);
        temp.VDDHSIFCON.B.UVMOD  = (config->underVoltageMode);
        temp.VDDHSIFCON.B.OVVAL  = (uint16)(config->overVoltage / IFXPMSEVR_VMONSADC_VDDEXT_VDDEVRSB_VDDM_HSIF_PHPHY012_FLEX_LSBMV);
        temp.VDDHSIFCON.B.OVMOD  = (config->overVoltageMode);
        temp.VDDHSIFCON.B.FILTER = (config->filter);
        pms->VMONS.VDDHSIFCON.U  = temp.VDDHSIFCON.U;
        break;
    case IfxPmsEvr_SecondaryMonitorVoltageSource_vddppu:
        temp.VDDPPUCON.B.UVVAL  = (uint16)(config->underVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDPPUCON.B.UVMOD  = (config->underVoltageMode);
        temp.VDDPPUCON.B.OVVAL  = (uint16)(config->overVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDPPUCON.B.OVMOD  = (config->overVoltageMode);
        temp.VDDPPUCON.B.FILTER = (config->filter);
        pms->VMONS.VDDPPUCON.U  = temp.VDDPPUCON.U;
        break;
    case IfxPmsEvr_SecondaryMonitorVoltageSource_vddphy0:
        temp.VDDPHY0CON.B.UVVAL  = (uint16)(config->underVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDPHY0CON.B.UVMOD  = (config->underVoltageMode);
        temp.VDDPHY0CON.B.OVVAL  = (uint16)(config->overVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDPHY0CON.B.OVMOD  = (config->overVoltageMode);
        temp.VDDPHY0CON.B.FILTER = (config->filter);
        pms->VMONS.VDDPHY0CON.U  = temp.VDDPHY0CON.U;
        break;
    case IfxPmsEvr_SecondaryMonitorVoltageSource_vddphy1:
        temp.VDDPHY1CON.B.UVVAL  = (uint16)(config->underVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDPHY1CON.B.UVMOD  = (config->underVoltageMode);
        temp.VDDPHY1CON.B.OVVAL  = (uint16)(config->overVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDPHY1CON.B.OVMOD  = (config->overVoltageMode);
        temp.VDDPHY1CON.B.FILTER = (config->filter);
        pms->VMONS.VDDPHY1CON.U  = temp.VDDPHY1CON.U;
        break;
    case IfxPmsEvr_SecondaryMonitorVoltageSource_vddpms0:
        temp.VDDPMS0CON.B.UVVAL  = (uint16)(config->underVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDPMS0CON.B.UVMOD  = (config->underVoltageMode);
        temp.VDDPMS0CON.B.OVVAL  = (uint16)(config->overVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDPMS0CON.B.OVMOD  = (config->overVoltageMode);
        temp.VDDPMS0CON.B.FILTER = (config->filter);
        pms->VMONS.VDDPMS0CON.U  = temp.VDDPMS0CON.U;
        break;
    case IfxPmsEvr_SecondaryMonitorVoltageSource_vddpms1:
        temp.VDDPMS1CON.B.UVVAL  = (uint16)(config->underVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDPMS1CON.B.UVMOD  = (config->underVoltageMode);
        temp.VDDPMS1CON.B.OVVAL  = (uint16)(config->overVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDPMS1CON.B.OVMOD  = (config->overVoltageMode);
        temp.VDDPMS1CON.B.FILTER = (config->filter);
        pms->VMONS.VDDPMS1CON.U  = temp.VDDPMS1CON.U;
        break;
    case IfxPmsEvr_SecondaryMonitorVoltageSource_vddpms2:
        temp.VDDPMS2CON.B.UVVAL  = (uint16)(config->underVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDPMS2CON.B.UVMOD  = (config->underVoltageMode);
        temp.VDDPMS2CON.B.OVVAL  = (uint16)(config->overVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDPMS2CON.B.OVMOD  = (config->overVoltageMode);
        temp.VDDPMS2CON.B.FILTER = (config->filter);
        pms->VMONS.VDDPMS2CON.U  = temp.VDDPMS2CON.U;
        break;
    case IfxPmsEvr_SecondaryMonitorVoltageSource_vddlmu0:
        temp.VDDLMU0CON.B.UVVAL  = (uint16)(config->underVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDLMU0CON.B.UVMOD  = (config->underVoltageMode);
        temp.VDDLMU0CON.B.OVVAL  = (uint16)(config->overVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDLMU0CON.B.OVMOD  = (config->overVoltageMode);
        temp.VDDLMU0CON.B.FILTER = (config->filter);
        pms->VMONS.VDDLMU0CON.U  = temp.VDDLMU0CON.U;
        break;
    case IfxPmsEvr_SecondaryMonitorVoltageSource_vddlmu1:
        temp.VDDLMU1CON.B.UVVAL  = (uint16)(config->underVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDLMU1CON.B.UVMOD  = (config->underVoltageMode);
        temp.VDDLMU1CON.B.OVVAL  = (uint16)(config->overVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDLMU1CON.B.OVMOD  = (config->overVoltageMode);
        temp.VDDLMU1CON.B.FILTER = (config->filter);
        pms->VMONS.VDDLMU1CON.U  = temp.VDDLMU1CON.U;
        break;
    case IfxPmsEvr_SecondaryMonitorVoltageSource_vddphphy2:
        temp.VDDPHPHY2CON.B.UVVAL  = (uint16)(config->underVoltage / IFXPMSEVR_VMONSADC_VDDEXT_VDDEVRSB_VDDM_HSIF_PHPHY012_FLEX_LSBMV);
        temp.VDDPHPHY2CON.B.UVMOD  = (config->underVoltageMode);
        temp.VDDPHPHY2CON.B.OVVAL  = (uint16)(config->overVoltage / IFXPMSEVR_VMONSADC_VDDEXT_VDDEVRSB_VDDM_HSIF_PHPHY012_FLEX_LSBMV);
        temp.VDDPHPHY2CON.B.OVMOD  = (config->overVoltageMode);
        temp.VDDPHPHY2CON.B.FILTER = (config->filter);
        pms->VMONS.VDDPHPHY2CON.U  = temp.VDDPHPHY2CON.U;
        break;
    case IfxPmsEvr_SecondaryMonitorVoltageSource_vddphy2:
        temp.VDDPHY2CON.B.UVVAL  = (uint16)(config->underVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDPHY2CON.B.UVMOD  = (config->underVoltageMode);
        temp.VDDPHY2CON.B.OVVAL  = (uint16)(config->overVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDPHY2CON.B.OVMOD  = (config->overVoltageMode);
        temp.VDDPHY2CON.B.FILTER = (config->filter);
        pms->VMONS.VDDPHY2CON.U  = temp.VDDPHY2CON.U;
        break;
    case IfxPmsEvr_SecondaryMonitorVoltageSource_vddsbram:
        temp.VDDSBRAMCON.B.UVVAL  = (uint16)(config->underVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDSBRAMCON.B.UVMOD  = (config->underVoltageMode);
        temp.VDDSBRAMCON.B.OVVAL  = (uint16)(config->overVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDSBRAMCON.B.OVMOD  = (config->overVoltageMode);
        temp.VDDSBRAMCON.B.FILTER = (config->filter);
        pms->VMONS.VDDSBRAMCON.U  = temp.VDDSBRAMCON.U;
        break;
    case IfxPmsEvr_SecondaryMonitorVoltageSource_vddpad:
        temp.VDDPADCON.B.UVVAL  = (uint16)(config->underVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDPADCON.B.UVMOD  = (config->underVoltageMode);
        temp.VDDPADCON.B.OVVAL  = (uint16)(config->overVoltage / IFXPMSEVR_VMONSADC_VDD_VDDSB_PHY012_CPUABC_PPU_PMS012_LSBMV);
        temp.VDDPADCON.B.OVMOD  = (config->overVoltageMode);
        temp.VDDPADCON.B.FILTER = (config->filter);
        pms->VMONS.VDDPADCON.U  = temp.VDDPADCON.U;
        break;
    default:
        /* Invalid Supply selected */
        break;
    }

#if (IFX_PROT_ENABLED == 1U)
    IfxApProt_setState((Ifx_PROT_PROT *)&(pms->PROTE), IfxApProt_State_run);
#endif
}


void IfxPmsEvr_configurePrimaryMonitor(Ifx_PMS *pms, IfxPmsEvr_PrimaryMonitorVoltageSource source, IfxPmsEvr_PrimaryMonitorConfig *config)
{
    Ifx_PMS_VMONP temp;
#if (IFX_PROT_ENABLED == 1U)
    IfxApProt_setState((Ifx_PROT_PROT *)&(pms->PROTE), IfxApProt_State_config);
#endif

    switch (source)
    {
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vdd:
        temp.VDDCON.B.UVVAL    = (uint16)(config->underVoltage / IFXPMSEVR_VMONPADC_VDD_VDDEVRSB_VDDM_PHPHY012_HSIF_LSBMV);
        temp.VDDCON.B.UVENABLE = config->underVoltageEnable;
        temp.VDDCON.B.OVVAL    = (uint16)(config->overVoltage / IFXPMSEVR_VMONPADC_VDD_VDDEVRSB_VDDM_PHPHY012_HSIF_LSBMV);
        temp.VDDCON.B.OVENABLE = config->overVoltageEnable;
        temp.VDDCON.B.FILTER   = (config->filter);
        pms->VMONP.VDDCON.U    = temp.VDDCON.U;
        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vddext:
        temp.VDDEXTCON.B.UVVAL    = (uint16)(config->underVoltage / IFXPMSEVR_VMONPADC_VDDEXT_VDDEXTDC_VDDCLS_SSDCHS_LSBMV);
        temp.VDDEXTCON.B.UVENABLE = config->underVoltageEnable;
        temp.VDDEXTCON.B.OVVAL    = (uint16)(config->overVoltage / IFXPMSEVR_VMONPADC_VDDEXT_VDDEXTDC_VDDCLS_SSDCHS_LSBMV);
        temp.VDDEXTCON.B.OVENABLE = config->overVoltageEnable;
        temp.VDDEXTCON.B.FILTER   = (config->filter);
        pms->VMONP.VDDEXTCON.U    = temp.VDDEXTCON.U;
        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vssdchs:
        temp.VSSDCHSCON.B.UVVAL    = (uint16)(config->underVoltage / IFXPMSEVR_VMONPADC_VDDEXT_VDDEXTDC_VDDCLS_SSDCHS_LSBMV);
        temp.VSSDCHSCON.B.UVENABLE = config->underVoltageEnable;
        temp.VSSDCHSCON.B.OVVAL    = (uint16)(config->overVoltage / IFXPMSEVR_VMONPADC_VDDEXT_VDDEXTDC_VDDCLS_SSDCHS_LSBMV);
        temp.VSSDCHSCON.B.OVENABLE = config->overVoltageEnable;
        temp.VSSDCHSCON.B.FILTER   = (config->filter);
        pms->VMONP.VSSDCHSCON.U    = temp.VSSDCHSCON.U;
        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vddextdc:
        temp.VDDEXTDCCON.B.UVVAL    = (uint16)(config->underVoltage / IFXPMSEVR_VMONPADC_VDDEXT_VDDEXTDC_VDDCLS_SSDCHS_LSBMV);
        temp.VDDEXTDCCON.B.UVENABLE = config->underVoltageEnable;
        temp.VDDEXTDCCON.B.OVVAL    = (uint16)(config->overVoltage / IFXPMSEVR_VMONPADC_VDDEXT_VDDEXTDC_VDDCLS_SSDCHS_LSBMV);
        temp.VDDEXTDCCON.B.OVENABLE = config->overVoltageEnable;
        temp.VDDEXTDCCON.B.FILTER   = (config->filter);
        pms->VMONP.VDDEXTDCCON.U    = temp.VDDEXTDCCON.U;
        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vdddcls:
        temp.VDDDCLSCON.B.UVVAL    = (uint16)(config->underVoltage / IFXPMSEVR_VMONPADC_VDDEXT_VDDEXTDC_VDDCLS_SSDCHS_LSBMV);
        temp.VDDDCLSCON.B.UVENABLE = config->underVoltageEnable;
        temp.VDDDCLSCON.B.OVVAL    = (uint16)(config->overVoltage / IFXPMSEVR_VMONPADC_VDDEXT_VDDEXTDC_VDDCLS_SSDCHS_LSBMV);
        temp.VDDDCLSCON.B.OVENABLE = config->overVoltageEnable;
        temp.VDDDCLSCON.B.FILTER   = (config->filter);
        pms->VMONP.VDDDCLSCON.U    = temp.VDDDCLSCON.U;
        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vddevrsb:
        temp.VDDEVRSBCON.B.UVVAL    = (uint16)(config->underVoltage / IFXPMSEVR_VMONPADC_VDD_VDDEVRSB_VDDM_PHPHY012_HSIF_LSBMV);
        temp.VDDEVRSBCON.B.UVENABLE = config->underVoltageEnable;
        temp.VDDEVRSBCON.B.OVVAL    = (uint16)(config->overVoltage / IFXPMSEVR_VMONPADC_VDD_VDDEVRSB_VDDM_PHPHY012_HSIF_LSBMV);
        temp.VDDEVRSBCON.B.OVENABLE = config->overVoltageEnable;
        temp.VDDEVRSBCON.B.FILTER   = (config->filter);
        pms->VMONP.VDDEVRSBCON.U    = temp.VDDEVRSBCON.U;
        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vddm:
        temp.VDDMCON.B.UVVAL    = (uint16)(config->underVoltage / IFXPMSEVR_VMONPADC_VDD_VDDEVRSB_VDDM_PHPHY012_HSIF_LSBMV);
        temp.VDDMCON.B.UVENABLE = config->underVoltageEnable;
        temp.VDDMCON.B.OVVAL    = (uint16)(config->overVoltage / IFXPMSEVR_VMONPADC_VDD_VDDEVRSB_VDDM_PHPHY012_HSIF_LSBMV);
        temp.VDDMCON.B.OVENABLE = config->overVoltageEnable;
        temp.VDDMCON.B.FILTER   = (config->filter);
        pms->VMONP.VDDMCON.U    = temp.VDDMCON.U;
        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vddphphy0:
        temp.VDDPHPHY0CON.B.UVVAL    = (uint16)(config->underVoltage / IFXPMSEVR_VMONPADC_VDD_VDDEVRSB_VDDM_PHPHY012_HSIF_LSBMV);
        temp.VDDPHPHY0CON.B.UVENABLE = config->underVoltageEnable;
        temp.VDDPHPHY0CON.B.OVVAL    = (uint16)(config->overVoltage / IFXPMSEVR_VMONPADC_VDD_VDDEVRSB_VDDM_PHPHY012_HSIF_LSBMV);
        temp.VDDPHPHY0CON.B.OVENABLE = config->overVoltageEnable;
        temp.VDDPHPHY0CON.B.FILTER   = (config->filter);
        pms->VMONP.VDDPHPHY0CON.U    = temp.VDDPHPHY0CON.U;
        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vddphphy1:
        temp.VDDPHPHY1CON.B.UVVAL    = (uint16)(config->underVoltage / IFXPMSEVR_VMONPADC_VDD_VDDEVRSB_VDDM_PHPHY012_HSIF_LSBMV);
        temp.VDDPHPHY1CON.B.UVENABLE = config->underVoltageEnable;
        temp.VDDPHPHY1CON.B.OVVAL    = (uint16)(config->overVoltage / IFXPMSEVR_VMONPADC_VDD_VDDEVRSB_VDDM_PHPHY012_HSIF_LSBMV);
        temp.VDDPHPHY1CON.B.OVENABLE = config->overVoltageEnable;
        temp.VDDPHPHY1CON.B.FILTER   = (config->filter);
        pms->VMONP.VDDPHPHY1CON.U    = temp.VDDPHPHY1CON.U;
        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vddhsif:
        temp.VDDHSIFCON.B.UVVAL    = (uint16)(config->underVoltage / IFXPMSEVR_VMONPADC_VDD_VDDEVRSB_VDDM_PHPHY012_HSIF_LSBMV);
        temp.VDDHSIFCON.B.UVENABLE = config->underVoltageEnable;
        temp.VDDHSIFCON.B.OVVAL    = (uint16)(config->overVoltage / IFXPMSEVR_VMONPADC_VDD_VDDEVRSB_VDDM_PHPHY012_HSIF_LSBMV);
        temp.VDDHSIFCON.B.OVENABLE = config->overVoltageEnable;
        temp.VDDHSIFCON.B.FILTER   = (config->filter);
        pms->VMONP.VDDHSIFCON.U    = temp.VDDHSIFCON.U;
        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vddppu:
        temp.VDDPPUCON.B.UVVAL    = (uint16)(config->underVoltage / IFXPMSEVR_VMONPADC_VDDSB_CPUABC_PPU_PHY012_LSBMV);
        temp.VDDPPUCON.B.UVENABLE = config->underVoltageEnable;
        temp.VDDPPUCON.B.OVVAL    = (uint16)(config->overVoltage / IFXPMSEVR_VMONPADC_VDDSB_CPUABC_PPU_PHY012_LSBMV);
        temp.VDDPPUCON.B.OVENABLE = config->overVoltageEnable;
        temp.VDDPPUCON.B.FILTER   = (config->filter);
        pms->VMONP.VDDPPUCON.U    = temp.VDDPPUCON.U;
        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vddphy0:
        temp.VDDPHY0CON.B.UVVAL    = (uint16)(config->underVoltage / IFXPMSEVR_VMONPADC_VDDSB_CPUABC_PPU_PHY012_LSBMV);
        temp.VDDPHY0CON.B.UVENABLE = config->underVoltageEnable;
        temp.VDDPHY0CON.B.OVVAL    = (uint16)(config->overVoltage / IFXPMSEVR_VMONPADC_VDDSB_CPUABC_PPU_PHY012_LSBMV);
        temp.VDDPHY0CON.B.OVENABLE = config->overVoltageEnable;
        temp.VDDPHY0CON.B.FILTER   = (config->filter);
        pms->VMONP.VDDPHY0CON.U    = temp.VDDPHY0CON.U;
        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vddphy1:
        temp.VDDPHY1CON.B.UVVAL    = (uint16)(config->underVoltage / IFXPMSEVR_VMONPADC_VDDSB_CPUABC_PPU_PHY012_LSBMV);
        temp.VDDPHY1CON.B.UVENABLE = config->underVoltageEnable;
        temp.VDDPHY1CON.B.OVVAL    = (uint16)(config->overVoltage / IFXPMSEVR_VMONPADC_VDDSB_CPUABC_PPU_PHY012_LSBMV);
        temp.VDDPHY1CON.B.OVENABLE = config->overVoltageEnable;
        temp.VDDPHY1CON.B.FILTER   = (config->filter);
        pms->VMONP.VDDPHY1CON.U    = temp.VDDPHY1CON.U;
        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vddlmu0:
        temp.VDDLMU0CON.B.UVVAL    = (uint16)(config->underVoltage / IFXPMSEVR_VMONPADC_VDDSB_CPUABC_PPU_PHY012_LSBMV);
        temp.VDDLMU0CON.B.UVENABLE = config->underVoltageEnable;
        temp.VDDLMU0CON.B.OVVAL    = (uint16)(config->overVoltage / IFXPMSEVR_VMONPADC_VDDSB_CPUABC_PPU_PHY012_LSBMV);
        temp.VDDLMU0CON.B.OVENABLE = config->overVoltageEnable;
        temp.VDDLMU0CON.B.FILTER   = (config->filter);
        pms->VMONP.VDDLMU0CON.U    = temp.VDDLMU0CON.U;
        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vddlmu1:
        temp.VDDLMU1CON.B.UVVAL    = (uint16)(config->underVoltage / IFXPMSEVR_VMONPADC_VDDSB_CPUABC_PPU_PHY012_LSBMV);
        temp.VDDLMU1CON.B.UVENABLE = config->underVoltageEnable;
        temp.VDDLMU1CON.B.OVVAL    = (uint16)(config->overVoltage / IFXPMSEVR_VMONPADC_VDDSB_CPUABC_PPU_PHY012_LSBMV);
        temp.VDDLMU1CON.B.OVENABLE = config->overVoltageEnable;
        temp.VDDLMU1CON.B.FILTER   = (config->filter);
        pms->VMONP.VDDLMU1CON.U    = temp.VDDLMU1CON.U;
        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vddpad:
        temp.VDDPADCON.B.UVVAL    = (uint16)(config->underVoltage / IFXPMSEVR_VMONPADC_VDDSB_CPUABC_PPU_PHY012_LSBMV);
        temp.VDDPADCON.B.UVENABLE = config->underVoltageEnable;
        temp.VDDPADCON.B.OVVAL    = (uint16)(config->overVoltage / IFXPMSEVR_VMONPADC_VDDSB_CPUABC_PPU_PHY012_LSBMV);
        temp.VDDPADCON.B.OVENABLE = config->overVoltageEnable;
        temp.VDDPADCON.B.FILTER   = (config->filter);
        pms->VMONP.VDDPADCON.U    = temp.VDDPADCON.U;
        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vddphphy2:
        temp.VDDPHPHY2CON.B.UVVAL    = (uint16)(config->underVoltage / IFXPMSEVR_VMONPADC_VDD_VDDEVRSB_VDDM_PHPHY012_HSIF_LSBMV);
        temp.VDDPHPHY2CON.B.UVENABLE = config->underVoltageEnable;
        temp.VDDPHPHY2CON.B.OVVAL    = (uint16)(config->overVoltage / IFXPMSEVR_VMONPADC_VDD_VDDEVRSB_VDDM_PHPHY012_HSIF_LSBMV);
        temp.VDDPHPHY2CON.B.OVENABLE = config->overVoltageEnable;
        temp.VDDPHPHY2CON.B.FILTER   = (config->filter);
        pms->VMONP.VDDPHPHY2CON.U    = temp.VDDPHPHY2CON.U;
        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vddphy2:
        temp.VDDPHY2CON.B.UVVAL    = (uint16)(config->underVoltage / IFXPMSEVR_VMONPADC_VDDSB_CPUABC_PPU_PHY012_LSBMV);
        temp.VDDPHY2CON.B.UVENABLE = config->underVoltageEnable;
        temp.VDDPHY2CON.B.OVVAL    = (uint16)(config->overVoltage / IFXPMSEVR_VMONPADC_VDDSB_CPUABC_PPU_PHY012_LSBMV);
        temp.VDDPHY2CON.B.OVENABLE = config->overVoltageEnable;
        temp.VDDPHY2CON.B.FILTER   = (config->filter);
        pms->VMONP.VDDPHY2CON.U    = temp.VDDPHY2CON.U;
        break;
    default:
        /* Invalid Supply selected */
        break;
    }

#if (IFX_PROT_ENABLED == 1U)
    IfxApProt_setState((Ifx_PROT_PROT *)&(pms->PROTE), IfxApProt_State_run);
#endif
}


void IfxPmsEvr_configureTristate(Ifx_PMS *pms, IfxPmsEvr_TristateConfig *config)
{
    Ifx_PMS_PAD_CON padCon;
    padCon.U              = pms->PAD.CON.U;

    padCon.B.ALLTRIST_P   = 1;
    padCon.B.ALLTRIST     = config->tristateEnable_All;
    padCon.B.SBTRIST_P    = 1;
    padCon.B.SBTRIST      = config->tristateEnable_Standby;

    padCon.B.ESR0PD       = config->esr0PullDown;
    padCon.B.ESR2WKPRUNPD = config->esr2PullDown;
    padCon.B.PORSTDFEN    = config->digitalFilterEnable;

#if (IFX_PROT_ENABLED == 1U)
    IfxApProt_setState((Ifx_PROT_PROT *)&(pms->PROTE), IfxApProt_State_config);
#endif

    pms->PAD.CON.U = padCon.U;

#if (IFX_PROT_ENABLED == 1U)
    IfxApProt_setState((Ifx_PROT_PROT *)&(pms->PROTE), IfxApProt_State_run);
#endif
}


void IfxPmsEvr_peakVoltageDetectionConfiguration(Ifx_PMS *pms, IfxPmsEvr_PeakVoltageConfig *config)
{
    Ifx_PMS_PVDCON vdd, vddext, vddextdc;

    switch (config->source)
    {
    case IfxPmsEvr_PeakDetectionVoltageSource_vdd:
        vdd.U           = pms->PEAK.VDD.U;
        vdd.B.ENABLE    = config->enablePeakVolt;
        vdd.B.LPFENABLE = config->lpfEnable;
        vdd.B.THRESHOLD = config->threshold;
        vdd.B.RESET     = config->swReset;
        pms->PEAK.VDD.U = vdd.U;
        break;
    case IfxPmsEvr_PeakDetectionVoltageSource_vddext:
        vddext.U           = pms->PEAK.VDDEXT.U;
        vddext.B.ENABLE    = config->enablePeakVolt;
        vddext.B.LPFENABLE = config->lpfEnable;
        vddext.B.THRESHOLD = config->threshold;
        vddext.B.RESET     = config->swReset;
        pms->PEAK.VDDEXT.U = vddext.U;
        break;
    case IfxPmsEvr_PeakDetectionVoltageSource_vddextdc:
        vddextdc.U           = pms->PEAK.VDDEXTDC.U;
        vddextdc.B.ENABLE    = config->enablePeakVolt;
        vddextdc.B.LPFENABLE = config->lpfEnable;
        vddextdc.B.THRESHOLD = config->threshold;
        vddextdc.B.RESET     = config->swReset;
        pms->PEAK.VDDEXTDC.U = vddextdc.U;
        break;
    default:
        /* Invalid Supply selected */
        break;
    }
}


boolean IfxPmsEvr_dcdcConfiguration(Ifx_PMS *pms, IfxPmsEvr_DcdcConfig *dcdcConfig)
{
    Ifx_PMS_EVRC_CON1 evrcCon1;
    Ifx_PMS_EVRC_CON3 evrcCon3;
    boolean           evrcstatus = 1;

    if (pms->EVRC.STAT0.B.EVRC)
    {
        evrcCon1.U = pms->EVRC.CON1.U;
        evrcCon3.U = pms->EVRC.CON3.U;

        if ((dcdcConfig->samplingFactor >= 50) && (dcdcConfig->samplingFactor <= 250))
        {
            evrcCon1.B.SDFREQ = dcdcConfig->samplingFactor;
        }
        else if (dcdcConfig->samplingFactor < 50)
        {
            evrcCon1.B.SDFREQ = 0x32;
        }
        else
        {
            evrcCon1.B.SDFREQ = 0xFA;
        }

        evrcCon1.B.SDFREQSPRD = dcdcConfig->freqSprdValue;
        evrcCon1.B.SYNCHYST   = dcdcConfig->hystWindow;
        evrcCon1.B.SYNCMAXDEV = dcdcConfig->maxDeviation;

        evrcCon3.B.SYNCDIVFAC = dcdcConfig->divider;
        evrcCon3.B.SYNCMUXSEL = dcdcConfig->syncInput;
        evrcCon3.B.SYNCIN     = dcdcConfig->dcdcSyncInput;
#if (IFX_PROT_ENABLED == 1U)
        IfxApProt_setState((Ifx_PROT_PROT *)&(pms->PROTE), IfxApProt_State_config);
#endif
        pms->EVRC.CON3.U    = evrcCon3.U;
        pms->EVRC.CON1.U    = evrcCon1.U;
        pms->EVRC.CON0.B.UP = 1u;
#if (IFX_PROT_ENABLED == 1U)
        IfxApProt_setState((Ifx_PROT_PROT *)&(pms->PROTE), IfxApProt_State_run);
#endif
        evrcstatus = 0;
    }

    return evrcstatus;
}


uint32 IfxPmsEvr_scaleExtVoltageSetup(Ifx_PMS *pms, IfxPmsEvr_ExternalVoltScalingConfig *config)
{
    uint32 vidValue;
    vidValue = pms->VID.CON0.U;

#if (IFX_PROT_ENABLED == 1U)
    IfxApProt_setState((Ifx_PROT_PROT *)&(pms->PROTE), IfxApProt_State_config);
#endif

    /* Disable Primary UV RESET */
    pms->VMONP.VDDRST.U |= ((1u << IFX_PMS_VMONPRST_RESETOFF_OFF) | (1u << IFX_PMS_VMONPRST_RESETOFF_P_OFF));

    /* Disable Primary OV/UV alarms */
    IfxPmsEvr_enablePrimaryOverVoltageAlarm(pms, IfxPmsEvr_PrimaryMonitorVoltageSource_vdd, FALSE);
    IfxPmsEvr_enablePrimaryUnderVoltageAlarm(pms, IfxPmsEvr_PrimaryMonitorVoltageSource_vdd, FALSE);

    /* Disable Secondary OV/UV alarms*/
    IfxPmsEvr_setOverVoltageMonitoringMode(pms, IfxPmsEvr_OverVoltageMonitoring_inactive, IfxPmsEvr_SecondaryMonitorVoltageSource_vdd);
    IfxPmsEvr_setUnderVoltageMonitoringMode(pms, IfxPmsEvr_UnderVoltageMonitoring_inactive, IfxPmsEvr_SecondaryMonitorVoltageSource_vdd);

    /* Adapting new UV reset trim value*/
    pms->VMONP.VDDRST.B.RESETTRIM = (uint16)(config->resetTrimValue / IFXPMSEVR_VMONPADC_VDD_VDDEVRSB_VDDM_PHPHY012_HSIF_LSBMV);

    /* Adapt secondary under/over voltage threshold */
    IfxPmsEvr_setSecondaryOverVoltageThresholdMv(pms, config->secondaryOverVoltage, IfxPmsEvr_SecondaryMonitorVoltageSource_vdd);
    IfxPmsEvr_setSecondaryUnderVoltageThresholdMv(pms, config->secondaryUnderVoltage, IfxPmsEvr_SecondaryMonitorVoltageSource_vdd);

    /* Adapt primary under/over voltage threshold */
    IfxPmsEvr_setPrimaryOverVoltageThresholdMv(pms, config->primaryOverVoltage, IfxPmsEvr_PrimaryMonitorVoltageSource_vdd);
    IfxPmsEvr_setPrimaryUnderVoltageThresholdMv(pms, config->primaryUnderVoltage, IfxPmsEvr_PrimaryMonitorVoltageSource_vdd);

#if (IFX_PROT_ENABLED == 1U)
    IfxApProt_setState((Ifx_PROT_PROT *)&(pms->PROTE), IfxApProt_State_run);
#endif
    /* External interface to the PMIC to be initialized by the user */
    return vidValue;
}


boolean IfxPmsEvr_scaleEvrVoltage(Ifx_PMS *pms, IfxPmsEvr_EvrcVoltScalingConfig *config)
{
    uint16            nominalVoltage = 0;
    boolean           timeExpire     = FALSE;
    boolean           status         = FALSE;

    Ifx_PMS_EVRC_CON0 evrc_con0;
    nominalVoltage = pms->VID.CON0.B.VDDNOM;
    evrc_con0.U    = pms->EVRC.CON0.U;

    {
#if (IFX_PROT_ENABLED == 1U)
        IfxApProt_setState((Ifx_PROT_PROT *)&(pms->PROTE), IfxApProt_State_config);
#endif
        /* Disable Primary UV RESET */
        pms->VMONP.VDDRST.U |= ((1u << IFX_PMS_VMONPRST_RESETOFF_OFF) | (1u << IFX_PMS_VMONPRST_RESETOFF_P_OFF));

        /* Disable Primary OV/UV alarms and adapt new OV/UV alarm threshold*/
        IfxPmsEvr_enablePrimaryOverVoltageAlarm(pms, IfxPmsEvr_PrimaryMonitorVoltageSource_vdd, FALSE);
        IfxPmsEvr_enablePrimaryUnderVoltageAlarm(pms, IfxPmsEvr_PrimaryMonitorVoltageSource_vdd, FALSE);

        /* Disable Seconadary OV/UV alarms and adapt new OV/UV alarm threshold*/
        IfxPmsEvr_setOverVoltageMonitoringMode(pms, IfxPmsEvr_OverVoltageMonitoring_inactive, IfxPmsEvr_SecondaryMonitorVoltageSource_vdd);
        IfxPmsEvr_setUnderVoltageMonitoringMode(pms, IfxPmsEvr_UnderVoltageMonitoring_inactive, IfxPmsEvr_SecondaryMonitorVoltageSource_vdd);

        /* Adapting new UV reset trim value*/
        pms->VMONP.VDDRST.B.RESETTRIM = (uint16)(config->resetTrimValue / IFXPMSEVR_VMONPADC_VDD_VDDEVRSB_VDDM_PHPHY012_HSIF_LSBMV);

        /* Adapt secondary under/over voltage threshold */
        IfxPmsEvr_setSecondaryOverVoltageThresholdMv(pms, config->secondaryOverVoltage, IfxPmsEvr_SecondaryMonitorVoltageSource_vdd);
        IfxPmsEvr_setSecondaryUnderVoltageThresholdMv(pms, config->secondaryUnderVoltage, IfxPmsEvr_SecondaryMonitorVoltageSource_vdd);

        /* Adapt primary under/over voltage threshold */
        IfxPmsEvr_setPrimaryOverVoltageThresholdMv(pms, config->primaryOverVoltage, IfxPmsEvr_PrimaryMonitorVoltageSource_vdd);
        IfxPmsEvr_setPrimaryUnderVoltageThresholdMv(pms, config->primaryUnderVoltage, IfxPmsEvr_PrimaryMonitorVoltageSource_vdd);

        /* Set target output voltage*/
        evrc_con0.B.SDVOUTSEL = nominalVoltage;
        evrc_con0.B.UP        = 1u;
        pms->EVRC.CON0.U      = evrc_con0.U;

        uint32 stmFreq, waitTicks;
        uint8  vokStatus;
        stmFreq   = IfxClock_getStmFrequency();
        waitTicks = (stmFreq / 1000000) * IFXPMSEVR_SDVOK_TIMEOUT;
        uint64 stmCountBegin = IfxStm_get(&MODULE_CPU0);
        uint64 currentCount  = stmCountBegin;

        /* Wait for 20us for the SDVOK bit to set.*/
        do
        {
            vokStatus = pms->EVRC.STAT0.B.SDVOK;

            if (((currentCount - stmCountBegin) > waitTicks) && (vokStatus != 1u))
            {
                /* Timeout happened and calibration is not completed yet */
                timeExpire = TRUE;
            }

            /* Get current STM tick */
            currentCount = IfxStm_get(&MODULE_CPU0);
        } while ((vokStatus != 1) && (timeExpire == FALSE));

        if (timeExpire)
        {
            if (config->errorHandler != NULL_PTR)
            {
                (*config->errorHandler)();
            }
        }
        else  //Re-enable UV reset and voltage monitor alarms
        {
            /* Voltage scaling successful. Re-enable UV Reset and monitor alarms*/
            pms->VMONP.VDDRST.U       = (((pms->VMONP.VDDRST.U) & ~(1u << IFX_PMS_VMONPRST_RESETOFF_OFF)) | (1u << IFX_PMS_VMONPRST_RESETOFF_P_OFF));
            pms->VMONP.VDDCON.U      |= ((1u << IFX_PMS_VMONPCON_UVENABLE_OFF) | (1u << IFX_PMS_VMONPCON_OVENABLE_OFF));
            pms->VMONS.VDDCON.B.UVMOD = config->underVoltageMode;
            pms->VMONS.VDDCON.B.OVMOD = config->overVoltageMode;
            status                    = TRUE;
        }

#if (IFX_PROT_ENABLED == 1U)
        IfxApProt_setState((Ifx_PROT_PROT *)&(pms->PROTE), IfxApProt_State_run);
#endif
    }
    return status;
}


boolean IfxPmsEvr_enableVoltageRail(Ifx_PMS *pms, IfxPmsEvr_PrimaryMonitorVoltageSource supply)
{
    boolean           status = TRUE;
    Ifx_PMS_VMONPSTAT vmonpStat;
    Ifx_PMS_VMONPRST  vmonpRst;

#if (IFX_PROT_ENABLED == 1U)
    IfxApProt_setState((Ifx_PROT_PROT *)&(pms->PROTE), IfxApProt_State_config);
#endif

    switch (supply)
    {
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vddphphy0:
        /* Set OVENABLE = 1u */
        pms->VMONP.VDDPHPHY0CON.B.OVENABLE = 1u;

        /* Reading VxxSTAT register */
        vmonpStat.U = pms->VMONP.VDDPHPHY0STAT.U;

        /* Set UVENABLE (result > resultVal) */
        if (vmonpStat.B.RESULT > vmonpStat.B.RESETVAL)
        {
            pms->VMONP.VDDPHPHY0CON.B.UVENABLE = 1u;

            /* Reading VxxRst register */
            vmonpRst.U                = pms->VMONP.VDDPHPHY0RST.U;
            vmonpRst.B.RESETOFF       = 0u;
            vmonpRst.B.RESETOFF_P     = 1u;
            /* Writing register back */
            pms->VMONP.VDDPHPHY0RST.U = vmonpRst.U;
        }

        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vddphphy1:
        /* Set OVENABLE = 1u */
        pms->VMONP.VDDPHPHY1CON.B.OVENABLE = 1u;

        /* Reading VxxSTAT register */
        vmonpStat.U = pms->VMONP.VDDPHPHY1STAT.U;

        /* Set UVENABLE (result > resultVal) */
        if (vmonpStat.B.RESULT > vmonpStat.B.RESETVAL)
        {
            pms->VMONP.VDDPHPHY1CON.B.UVENABLE = 1u;

            /* Reading VxxRst register */
            vmonpRst.U                = pms->VMONP.VDDPHPHY1RST.U;
            vmonpRst.B.RESETOFF       = 0u;
            vmonpRst.B.RESETOFF_P     = 1u;
            /* Writing register back */
            pms->VMONP.VDDPHPHY1RST.U = vmonpRst.U;
        }

        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vddphphy2:
        /* Set OVENABLE = 1u */
        pms->VMONP.VDDPHPHY2CON.B.OVENABLE = 1u;

        /* Reading VxxSTAT register */
        vmonpStat.U = pms->VMONP.VDDPHPHY2STAT.U;

        /* Set UVENABLE (result > resultVal) */
        if (vmonpStat.B.RESULT > vmonpStat.B.RESETVAL)
        {
            pms->VMONP.VDDPHPHY2CON.B.UVENABLE = 1u;

            /* Reading VxxRst register */
            vmonpRst.U                = pms->VMONP.VDDPHPHY2RST.U;
            vmonpRst.B.RESETOFF       = 0u;
            vmonpRst.B.RESETOFF_P     = 1u;
            /* Writing register back */
            pms->VMONP.VDDPHPHY2RST.U = vmonpRst.U;
        }

        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vddphy0:
        /* Set OVENABLE = 1u */
        pms->VMONP.VDDPHY0CON.B.OVENABLE = 1u;

        /* Reading VxxSTAT register */
        vmonpStat.U = pms->VMONP.VDDPHY0STAT.U;

        /* Set UVENABLE (result > resultVal) */
        if (vmonpStat.B.RESULT > vmonpStat.B.RESETVAL)
        {
            pms->VMONP.VDDPHY0CON.B.UVENABLE = 1u;

            /* Reading VxxRst register */
            vmonpRst.U              = pms->VMONP.VDDPHY0RST.U;
            vmonpRst.B.RESETOFF     = 0u;
            vmonpRst.B.RESETOFF_P   = 1u;
            /* Writing register back */
            pms->VMONP.VDDPHY0RST.U = vmonpRst.U;
        }

        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vddphy1:
        /* Set OVENABLE = 1u */
        pms->VMONP.VDDPHY1CON.B.OVENABLE = 1u;

        /* Reading VxxSTAT register */
        vmonpStat.U = pms->VMONP.VDDPHY1STAT.U;

        /* Set UVENABLE (result > resultVal) */
        if (vmonpStat.B.RESULT > vmonpStat.B.RESETVAL)
        {
            pms->VMONP.VDDPHY1CON.B.UVENABLE = 1u;

            /* Reading VxxRst register */
            vmonpRst.U              = pms->VMONP.VDDPHY1RST.U;
            vmonpRst.B.RESETOFF     = 0u;
            vmonpRst.B.RESETOFF_P   = 1u;
            /* Writing register back */
            pms->VMONP.VDDPHY1RST.U = vmonpRst.U;
        }

        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vddphy2:
        /* Set OVENABLE = 1u */
        pms->VMONP.VDDPHY2CON.B.OVENABLE = 1u;

        /* Reading VxxSTAT register */
        vmonpStat.U = pms->VMONP.VDDPHY2STAT.U;

        /* Set UVENABLE (result > resultVal) */
        if (vmonpStat.B.RESULT > vmonpStat.B.RESETVAL)
        {
            pms->VMONP.VDDPHY2CON.B.UVENABLE = 1u;

            /* Reading VxxRst register */
            vmonpRst.U              = pms->VMONP.VDDPHY2RST.U;
            vmonpRst.B.RESETOFF     = 0u;
            vmonpRst.B.RESETOFF_P   = 1u;
            /* Writing register back */
            pms->VMONP.VDDPHY2RST.U = vmonpRst.U;
        }

        break;
    case IfxPmsEvr_PrimaryMonitorVoltageSource_vddhsif:
        /* Set OVENABLE = 1u */
        pms->VMONP.VDDHSIFCON.B.OVENABLE = 1u;

        /* Reading VxxSTAT register */
        vmonpStat.U = pms->VMONP.VDDHSIFSTAT.U;

        /* Set UVENABLE (result > resultVal) */
        if (vmonpStat.B.RESULT > vmonpStat.B.RESETVAL)
        {
            pms->VMONP.VDDHSIFCON.B.UVENABLE = 1u;

            /* Reading VxxRst register */
            vmonpRst.U              = pms->VMONP.VDDHSIFRST.U;
            vmonpRst.B.RESETOFF     = 0u;
            vmonpRst.B.RESETOFF_P   = 1u;
            /* Writing register back */
            pms->VMONP.VDDHSIFRST.U = vmonpRst.U;
        }

        break;
    default:
        /* Invalid Supply selected */
        status = FALSE;
        break;
    }

#if (IFX_PROT_ENABLED == 1U)
    IfxApProt_setState((Ifx_PROT_PROT *)&(pms->PROTE), IfxApProt_State_run);
#endif
    return status;
}


void IfxPmsEvr_configureAccessToPms(IfxApApu_ApuConfig *apConfig)
{
    IfxApApu_init((Ifx_ACCEN_ACCEN *)&MODULE_PMS.ACCEN, apConfig);
}
