/*****************************************************************************
*
* Copyright (C) 2022 Infineon Technologies AG. All rights reserved.
*
* Infineon Technologies AG (INFINEON) is supplying this file for use
* exclusively with Infineon's microcontroller products. This file can be freely
* distributed within development tools and software supporting such microcontroller
* products.
*
* THIS SOFTWARE IS PROVIDED "AS IS".  NO WARRANTIES, WHETHER EXPRESS, IMPLIED
* OR STATUTORY, INCLUDING, BUT NOT LIMITED TO, IMPLIED WARRANTIES OF
* MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE APPLY TO THIS SOFTWARE.
* INFINEON SHALL NOT, IN ANY CIRCUMSTANCES, BE LIABLE FOR DIRECT, INDIRECT, INCIDENTAL, 
* SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.
*
******************************************************************************/
#include "dsplib.h"
#include "IfxAsm_Tricore.h"
#include "dsplib-internal.h"



IFXASM_ALIGNMENT_8(); 
__asm(
"etwiddle:\n"
"\t.byte  -1, 127, 0, 0, -1, 127, 0, 0, -1, 127, 0, 0\n"
"\t.byte  65, 118, 5, -49, -126, 90, 126, -91, -5, 48, -65, -119\n"
"\t.byte  -126, 90, 126, -91, 0, 0, 1, -128, 126, -91, 126, -91\n"
"\t.byte  -5, 48, -65, -119, 126, -91, 126, -91, -65, -119, -5, 48\n"
"\t.byte  97, 127, 116, -13, -119, 125, 7, -25, 124, 122, -40, -38\n"
"\t.byte  -30, 112, -86, -61, 28, 71, -109, -107, -116, 12, -97, -128\n"
"\t.byte  51, 81, 15, -99, 7, -25, 119, -126, 30, -113, -86, -61\n"
"\t.byte  40, 37, -124, -123, -109, -107, -28, -72, 15, -99, 51, 81\n"
"\t.byte  -119, 125, 7, -25, 65, 118, 5, -49, 109, 106, -28, -72\n"
"\t.byte  109, 106, -28, -72, -5, 48, -65, -119, 7, -25, 119, -126\n"
"\t.byte  28, 71, -109, -107, 5, -49, -65, -119, 119, -126, 7, -25\n"
"\t.byte  -7, 24, 119, -126, -65, -119, 5, -49, -28, -72, 109, 106\n"
"\t.byte  124, 122, -40, -38, 109, 106, -28, -72, 51, 81, 15, -99\n"
"\t.byte  -15, 98, -51, -82, -7, 24, 119, -126, -86, -61, 30, -113\n"
"\t.byte  86, 60, 30, -113, -28, -72, -109, -107, -97, -128, -116, 12\n"
"\t.byte  -116, 12, -97, -128, 119, -126, 7, -25, -40, -38, 124, 122\n"
"\t.byte  -11, 127, -36, -4, -40, 127, -72, -7, -90, 127, -106, -10\n"
"\t.byte  4, 117, 33, -52, -11, 85, 41, -95, 38, 40, 119, -122\n"
"\t.byte  66, 88, 77, -93, -72, -7, 40, -128, 21, -97, 101, -84\n"
"\t.byte  17, 46, -107, -120, 41, -95, 11, -86, -84, -115, -116, 57\n"
"\t.byte  9, 127, 85, -16, 41, 124, -26, -32, 107, 119, -17, -47\n"
"\t.byte  94, 111, -23, -64, -50, 65, 55, -110, 36, 3, 11, -128\n"
"\t.byte  -65, 78, 24, -101, -26, -32, -41, -125, -4, -118, 33, -52\n"
"\t.byte  35, 34, -92, -124, 55, -110, 50, -66, 77, -93, 66, 88\n"
"\t.byte  -29, 124, -11, -29, -75, 115, 70, -55, -24, 100, 65, -79\n"
"\t.byte  -90, 104, 76, -74, 31, 43, 124, -121, -35, -35, -92, -124\n"
"\t.byte  122, 68, -35, -109, 70, -55, 75, -116, -9, -128, 85, -16\n"
"\t.byte  -30, 21, -29, -127, 124, -121, -31, -44, -23, -64, 94, 111\n"
"\t.byte  -119, 121, -38, -41, -49, 102, -63, -77, -76, 73, 90, -105\n"
"\t.byte  -21, 96, 101, -84, -56, 18, 100, -127, -122, -69, -35, -109\n"
"\t.byte  -116, 57, -84, -115, -63, -77, 49, -103, -29, -127, -30, 21\n"
"\t.byte  106, 9, 90, -128, 100, -127, 56, -19, -11, -29, -29, 124\n"
"\t.byte  -40, 127, -72, -7, 97, 127, 116, -13, -100, 126, 56, -19\n"
"\t.byte  -75, 115, 70, -55, 51, 81, 15, -99, 26, 31, -41, -125\n"
"\t.byte  -11, 85, 41, -95, 116, -13, -97, -128, 49, -103, -63, -77\n"
"\t.byte  31, 43, 124, -121, 15, -99, -51, -82, 55, -110, -50, 65\n"
"\t.byte  -100, 126, 56, -19, 124, 122, -40, -38, -75, 115, 70, -55\n"
"\t.byte  -55, 109, 50, -66, 86, 60, 30, -113, -72, -7, 40, -128\n"
"\t.byte  63, 76, 49, -103, -40, -38, -124, -123, 124, -121, -31, -44\n"
"\t.byte  26, 31, -41, -125, 30, -113, -86, -61, 11, -86, -41, 94\n"
"\t.byte  41, 124, -26, -32, -30, 112, -86, -61, -41, 94, 11, -86\n"
"\t.byte  -49, 102, -63, -77, 40, 37, -124, -123, -31, -44, 124, -121\n"
"\t.byte  -50, 65, 55, -110, -86, -61, 30, -113, 40, -128, -72, -7\n"
"\t.byte  -56, 18, 100, -127, -124, -123, -40, -38, 70, -55, -75, 115\n"
"\t.byte  -124, 120, -31, -44, -15, 98, -51, -82, -50, 65, 55, -110\n"
"\t.byte  -41, 94, 11, -86, -116, 12, -97, -128, -63, -77, 49, -103\n"
"\t.byte  -70, 54, 75, -116, -51, -82, 15, -99, -41, -125, 26, 31\n"
"\t.byte  72, 6, 40, -128, -97, -128, 116, -13, 56, -19, -100, 126\n"
"\t.byte  -90, 127, -106, -10, -100, 126, 56, -19, -29, 124, -11, -29\n"
"\t.byte  84, 114, 116, -58, 63, 76, 49, -103, -30, 21, -29, -127\n"
"\t.byte  -101, 83, 21, -97, 56, -19, 100, -127, -35, -109, -122, -69\n"
"\t.byte  38, 40, 119, -122, 49, -103, -63, -77, 90, -105, -76, 73\n"
"\t.byte  29, 126, 30, -22, -124, 120, -31, -44, 94, 111, -23, -64\n"
"\t.byte  35, 108, -122, -69, -70, 54, 75, -116, 85, -16, -9, -128\n"
"\t.byte  -76, 73, 90, -105, -31, -44, 124, -121, -92, -124, -35, -35\n"
"\t.byte  11, 28, 29, -125, 75, -116, 70, -55, 65, -79, -24, 100\n"
"\t.byte  92, 123, -35, -35, -55, 109, 50, -66, 66, 88, 77, -93\n"
"\t.byte  -24, 100, 65, -79, 26, 31, -41, -125, 33, -52, -4, -118\n"
"\t.byte  23, 63, -94, -112, 50, -66, 55, -110, 11, -128, 36, 3\n"
"\t.byte  -85, 15, -9, -128, -41, -125, -26, -32, -17, -47, 107, 119\n"
"\t.byte  107, 119, -17, -47, -41, 94, 11, -86, -116, 57, -84, -115\n"
"\t.byte  -77, 92, -66, -89, 72, 6, 40, -128, 101, -84, 21, -97\n"
"\t.byte  -33, 51, -4, -118, 11, -86, 41, -95, 119, -122, 38, 40\n"
"\t.byte  36, 3, 11, -128, 40, -128, -72, -7, -106, -10, -90, 127");


IFXASM_ALIGNMENT_8(); 
__asm(
"shuffle:\n"
"\t.byte 0, 0, 0, 0, 16, 0, 0, 0, 32, 0, 0, 0\n"
"\t.byte  48, 0, 0, 0, 4, 0, 0, 0, 20, 0, 0, 0\n"
"\t.byte  36, 0, 0, 0, 52, 0, 0, 0, 8, 0, 0, 0\n"
"\t.byte  24, 0, 0, 0, 40, 0, 0, 0, 56, 0, 0, 0\n"
"\t.byte  12, 0, 0, 0, 28, 0, 0, 0, 44, 0, 0, 0\n"
"\t.byte  60, 0, 0, 0, 1, 0, 0, 0, 17, 0, 0, 0\n"
"\t.byte  33, 0, 0, 0, 49, 0, 0, 0, 5, 0, 0, 0\n"
"\t.byte  21, 0, 0, 0, 37, 0, 0, 0, 53, 0, 0, 0\n"
"\t.byte  9, 0, 0, 0, 25, 0, 0, 0, 41, 0, 0, 0\n"
"\t.byte  57, 0, 0, 0, 13, 0, 0, 0, 29, 0, 0, 0\n"
"\t.byte  45, 0, 0, 0, 61, 0, 0, 0, 2, 0, 0, 0\n"
"\t.byte  18, 0, 0, 0, 34, 0, 0, 0, 50, 0, 0, 0\n"
"\t.byte  6, 0, 0, 0, 22, 0, 0, 0, 38, 0, 0, 0\n"
"\t.byte  54, 0, 0, 0, 10, 0, 0, 0, 26, 0, 0, 0\n"
"\t.byte  42, 0, 0, 0, 58, 0, 0, 0, 14, 0, 0, 0\n"
"\t.byte  30, 0, 0, 0, 46, 0, 0, 0, 62, 0, 0, 0\n"
"\t.byte  3, 0, 0, 0, 19, 0, 0, 0, 35, 0, 0, 0\n"
"\t.byte  51, 0, 0, 0, 7, 0, 0, 0, 23, 0, 0, 0\n"
"\t.byte  39, 0, 0, 0, 55, 0, 0, 0, 11, 0, 0, 0\n"
"\t.byte  27, 0, 0, 0, 43, 0, 0, 0, 59, 0, 0, 0\n"
"\t.byte  15, 0, 0, 0, 31, 0, 0, 0, 47, 0, 0, 0\n"
"\t.byte  63, 0, 0, 0");


IFXASM_ALIGNMENT_8(); 
__asm(
"ptwiddle:\n"
"\t.byte  0, 64, 0, 0, 0, 64, 0, 0, 0, 64, 0, 0\n"
"\t.byte  32, 59, -126, -25, 65, 45, -65, -46, 126, 24, -32, -60\n"
"\t.byte  65, 45, -65, -46, 0, 0, 1, -64, -65, -46, -65, -46\n"
"\t.byte  126, 24, -32, -60, -65, -46, -65, -46, -32, -60, 126, 24\n"
"\t.byte  -79, 63, -70, -7, -59, 62, -124, -13, 62, 61, 108, -19\n"
"\t.byte  113, 56, -43, -31, -114, 35, -54, -54, 70, 6, 79, -64\n"
"\t.byte  -102, 40, -121, -50, -124, -13, 59, -63, -113, -57, -43, -31\n"
"\t.byte  -108, 18, -62, -62, -54, -54, 114, -36, -121, -50, -102, 40\n"
"\t.byte  -59, 62, -124, -13, 32, 59, -126, -25, 54, 53, 114, -36\n"
"\t.byte  54, 53, 114, -36, 126, 24, -32, -60, -124, -13, 59, -63\n"
"\t.byte  -114, 35, -54, -54, -126, -25, -32, -60, 59, -63, -124, -13\n"
"\t.byte  124, 12, 59, -63, -32, -60, -126, -25, 114, -36, 54, 53\n"
"\t.byte  62, 61, 108, -19, 54, 53, 114, -36, -102, 40, -121, -50\n"
"\t.byte  121, 49, 102, -41, 124, 12, 59, -63, -43, -31, -113, -57\n"
"\t.byte  43, 30, -113, -57, 114, -36, -54, -54, 79, -64, 70, 6\n"
"\t.byte  70, 6, 79, -64, 59, -63, -124, -13, 108, -19, 62, 61");



IFXASM_ALIGNMENT_8(); 
__asm(
"btwiddle:\n"
"\t.byte  -1, 127, 0, 0, -3, 127, 110, -2, -11, 127, -36, -4\n"
"\t.byte  -23, 127, 74, -5, -40, 127, -72, -7, -63, 127, 39, -8\n"
"\t.byte  -90, 127, -106, -10, -122, 127, 5, -11, 97, 127, 116, -13\n"
"\t.byte  55, 127, -28, -15, 9, 127, 85, -16, -43, 126, -58, -18\n"
"\t.byte  -100, 126, 56, -19, 95, 126, -85, -21, 29, 126, 30, -22\n"
"\t.byte  -43, 125, -110, -24, -119, 125, 7, -25, 57, 125, 126, -27\n"
"\t.byte  -29, 124, -11, -29, -120, 124, 109, -30, 41, 124, -26, -32\n"
"\t.byte  -59, 123, 97, -33, 92, 123, -35, -35, -18, 122, 90, -36\n"
"\t.byte  124, 122, -40, -38, 5, 122, 88, -39, -119, 121, -38, -41\n"
"\t.byte  9, 121, 93, -42, -124, 120, -31, -44, -6, 119, 103, -45\n"
"\t.byte  107, 119, -17, -47, -40, 118, 121, -48, 65, 118, 5, -49\n"
"\t.byte  -91, 117, -110, -51, 4, 117, 33, -52, 95, 116, -77, -54\n"
"\t.byte  -75, 115, 70, -55, 7, 115, -36, -57, 84, 114, 116, -58\n"
"\t.byte  -99, 113, 14, -59, -30, 112, -86, -61, 34, 112, 72, -62\n"
"\t.byte  94, 111, -23, -64, -106, 110, -115, -65, -55, 109, 50, -66\n"
"\t.byte  -8, 108, -37, -68, 35, 108, -122, -69, 74, 107, 51, -70\n"
"\t.byte  109, 106, -28, -72, -117, 105, -105, -73, -90, 104, 76, -74\n"
"\t.byte  -68, 103, 5, -75, -49, 102, -63, -77, -35, 101, 127, -78\n"
"\t.byte  -24, 100, 65, -79, -18, 99, 5, -80, -15, 98, -51, -82\n"
"\t.byte  -16, 97, -104, -83, -21, 96, 101, -84, -29, 95, 55, -85\n"
"\t.byte  -41, 94, 11, -86, -57, 93, -29, -88, -77, 92, -66, -89\n"
"\t.byte  -100, 91, -100, -90, -126, 90, 126, -91, 100, 89, 100, -92\n"
"\t.byte  66, 88, 77, -93, 29, 87, 57, -94, -11, 85, 41, -95\n"
"\t.byte  -55, 84, 29, -96, -101, 83, 21, -97, 104, 82, 16, -98\n"
"\t.byte  51, 81, 15, -99, -5, 79, 18, -100, -65, 78, 24, -101\n"
"\t.byte  -127, 77, 35, -102, 63, 76, 49, -103, -5, 74, 68, -104\n"
"\t.byte  -76, 73, 90, -105, 105, 72, 117, -106, 28, 71, -109, -107\n"
"\t.byte  -51, 69, -74, -108, 122, 68, -35, -109, 37, 67, 8, -109\n"
"\t.byte  -50, 65, 55, -110, 115, 64, 106, -111, 23, 63, -94, -112\n"
"\t.byte  -72, 61, -34, -113, 86, 60, 30, -113, -14, 58, 99, -114\n"
"\t.byte  -116, 57, -84, -115, 36, 56, -7, -116, -70, 54, 75, -116\n"
"\t.byte  77, 53, -95, -117, -33, 51, -4, -118, 110, 50, 91, -118\n"
"\t.byte  -5, 48, -65, -119, -121, 47, 40, -119, 17, 46, -107, -120\n"
"\t.byte  -103, 44, 6, -120, 31, 43, 124, -121, -93, 41, -9, -122\n"
"\t.byte  38, 40, 119, -122, -88, 38, -5, -123, 40, 37, -124, -123\n"
"\t.byte  -90, 35, 18, -123, 35, 34, -92, -124, -97, 32, 59, -124\n"
"\t.byte  26, 31, -41, -125, -109, 29, 120, -125, 11, 28, 29, -125\n"
"\t.byte  -126, 26, -57, -126, -7, 24, 119, -126, 110, 23, 43, -126\n"
"\t.byte  -30, 21, -29, -127, 85, 20, -95, -127, -56, 18, 100, -127\n"
"\t.byte  58, 17, 43, -127, -85, 15, -9, -128, 28, 14, -55, -128\n"
"\t.byte  -116, 12, -97, -128, -5, 10, 122, -128, 106, 9, 90, -128\n"
"\t.byte  -39, 7, 63, -128, 72, 6, 40, -128, -74, 4, 23, -128\n"
"\t.byte  36, 3, 11, -128, -110, 1, 3, -128, 0, 0, 1, -128\n"
"\t.byte  110, -2, 3, -128, -36, -4, 11, -128, 74, -5, 23, -128\n"
"\t.byte  -72, -7, 40, -128, 39, -8, 63, -128, -106, -10, 90, -128\n"
"\t.byte  5, -11, 122, -128, 116, -13, -97, -128, -28, -15, -55, -128\n"
"\t.byte  85, -16, -9, -128, -58, -18, 43, -127, 56, -19, 100, -127\n"
"\t.byte  -85, -21, -95, -127, 30, -22, -29, -127, -110, -24, 43, -126\n"
"\t.byte  7, -25, 119, -126, 126, -27, -57, -126, -11, -29, 29, -125\n"
"\t.byte  109, -30, 120, -125, -26, -32, -41, -125, 97, -33, 59, -124\n"
"\t.byte  -35, -35, -92, -124, 90, -36, 18, -123, -40, -38, -124, -123\n"
"\t.byte  88, -39, -5, -123, -38, -41, 119, -122, 93, -42, -9, -122\n"
"\t.byte  -31, -44, 124, -121, 103, -45, 6, -120, -17, -47, -107, -120\n"
"\t.byte  121, -48, 40, -119, 5, -49, -65, -119, -110, -51, 91, -118\n"
"\t.byte  33, -52, -4, -118, -77, -54, -95, -117, 70, -55, 75, -116\n"
"\t.byte  -36, -57, -7, -116, 116, -58, -84, -115, 14, -59, 99, -114\n"
"\t.byte  -86, -61, 30, -113, 72, -62, -34, -113, -23, -64, -94, -112\n"
"\t.byte  -115, -65, 106, -111, 50, -66, 55, -110, -37, -68, 8, -109\n"
"\t.byte  -122, -69, -35, -109, 51, -70, -74, -108, -28, -72, -109, -107\n"
"\t.byte  -105, -73, 117, -106, 76, -74, 90, -105, 5, -75, 68, -104\n"
"\t.byte  -63, -77, 49, -103, 127, -78, 35, -102, 65, -79, 24, -101\n"
"\t.byte  5, -80, 18, -100, -51, -82, 15, -99, -104, -83, 16, -98\n"
"\t.byte  101, -84, 21, -97, 55, -85, 29, -96, 11, -86, 41, -95\n"
"\t.byte  -29, -88, 57, -94, -66, -89, 77, -93, -100, -90, 100, -92\n"
"\t.byte  126, -91, 126, -91, 100, -92, -100, -90, 77, -93, -66, -89\n"
"\t.byte  57, -94, -29, -88, 41, -95, 11, -86, 29, -96, 55, -85\n"
"\t.byte  21, -97, 101, -84, 16, -98, -104, -83, 15, -99, -51, -82\n"
"\t.byte  18, -100, 5, -80, 24, -101, 65, -79, 35, -102, 127, -78\n"
"\t.byte  49, -103, -63, -77, 68, -104, 5, -75, 90, -105, 76, -74\n"
"\t.byte  117, -106, -105, -73, -109, -107, -28, -72, -74, -108, 51, -70\n"
"\t.byte  -35, -109, -122, -69, 8, -109, -37, -68, 55, -110, 50, -66\n"
"\t.byte  106, -111, -115, -65, -94, -112, -23, -64, -34, -113, 72, -62\n"
"\t.byte  30, -113, -86, -61, 99, -114, 14, -59, -84, -115, 116, -58\n"
"\t.byte  -7, -116, -36, -57, 75, -116, 70, -55, -95, -117, -77, -54\n"
"\t.byte  -4, -118, 33, -52, 91, -118, -110, -51, -65, -119, 5, -49\n"
"\t.byte  40, -119, 121, -48, -107, -120, -17, -47, 6, -120, 103, -45\n"
"\t.byte  124, -121, -31, -44, -9, -122, 93, -42, 119, -122, -38, -41\n"
"\t.byte  -5, -123, 88, -39, -124, -123, -40, -38, 18, -123, 90, -36\n"
"\t.byte  -92, -124, -35, -35, 59, -124, 97, -33, -41, -125, -26, -32\n"
"\t.byte  120, -125, 109, -30, 29, -125, -11, -29, -57, -126, 126, -27\n"
"\t.byte  119, -126, 7, -25, 43, -126, -110, -24, -29, -127, 30, -22\n"
"\t.byte  -95, -127, -85, -21, 100, -127, 56, -19, 43, -127, -58, -18\n"
"\t.byte  -9, -128, 85, -16, -55, -128, -28, -15, -97, -128, 116, -13\n"
"\t.byte  122, -128, 5, -11, 90, -128, -106, -10, 63, -128, 39, -8\n"
"\t.byte  40, -128, -72, -7, 23, -128, 74, -5, 11, -128, -36, -4\n"
"\t.byte  3, -128, 110, -2");
						



void Ifx_fftComplexQ15_512hp(csint16 * y,csint16 * x){

	IFXASM_ALIGNMENT_8();

	MOV_H(_D0,_N(0x2000));
	ADDI(_D0,_D0,_N(0x2000));
	MOV_H(_D1,_N(0xe001));
	ADDI(_D1,_D1,_N(-0x2000));
	MOV_AA(_A2,_A5);
	ADD_A(_A2,_N(-0x8));
	LEA(_A3,[_A2]0x400);
	MOVH_A(_A6,_HI(btwiddle));
	LEA(_A6,[_A6]_LO(btwiddle));
	LD_D(_E2,[+_A2]0x8);
	LD_D(_E4,[+_A3]0x8);
	MULR_H(_D2,_D2,_D0LL,_N(0x1));
	LD_D(_E10,[_A6+]0x8);
	MULR_H(_D3,_D3,_D0LL,_N(0x1));
	MSUBR_H(_D6,_D2,_D4,_D1LL,_N(0x1));
	MSUBR_H(_D7,_D3,_D5,_D1LL,_N(0x1));
	MADDR_H(_D12,_D2,_D4,_D1LL,_N(0x1));
	MADDR_H(_D13,_D3,_D5,_D1LL,_N(0x1));
	MULR_H(_D8,_D12,_D10LL,_N(0x1));
	MULR_H(_D9,_D13,_D11LL,_N(0x1));
	LD_D(_E2,[+_A2]0x8);
	MADDSUR_H(_D8,_D8,_D12,_D10UU,_N(0x1));
	LD_D(_E4,[+_A3]0x8);
	MADDSUR_H(_D9,_D9,_D13,_D11UU,_N(0x1));
	LEA(_A7,0x7d);

IFXASM_LABEL(butterfly);
	MULR_H(_D2, _D2, _D0LL, _N(1));
	LD_D(_E10, [_A6+]8);
	MULR_H(_D3, _D3, _D0LL, _N(1));
	ST_D([_A2]-8, _E6);
	MSUBR_H(_D6, _D2, _D4, _D1LL, _N(1));
	ST_D([_A3]-8, _E8);
	MSUBR_H(_D7,_D3, _D5, _D1LL, _N(1));
	MADDR_H(_D12, _D2, _D4, _D1LL, _N(1));
	MADDR_H(_D13, _D3, _D5, _D1LL, _N(1));
	MULR_H(_D8, _D12, _D10LL, _N(1));
	MULR_H(_D9, _D13, _D11LL, _N(1));
	LD_D(_E2, [+_A2]8);
	MADDSUR_H(_D8, _D8, _D12, _D10UU, _N(1));
	LD_D(_E4, [+_A3]8);
	MADDSUR_H(_D9, _D9, _D13, _D11UU, _N(1));
	LOOP(_A7, butterfly);
	MULR_H(_D2, _D2, _D0LL, _N(1));
	LD_D(_E10, [_A6+]8);
	MULR_H(_D3, _D3, _D0LL, _N(1));
	ST_D([_A2]-8, _E6);
	MSUBR_H(_D6, _D2, _D4, _D1LL, _N(1));
	ST_D([_A3]-8, _E8);
	MSUBR_H(_D7, _D3, _D5, _D1LL, _N(1));
	MADDR_H(_D12, _D2, _D4, _D1LL, _N(1));
	MADDR_H(_D13, _D3, _D5, _D1LL, _N(1));
	MULR_H(_D8, _D12, _D10LL, _N(1));
	MULR_H(_D9, _D13, _D11LL, _N(1));
	LEA(_A2, [_A2] 8);
	MADDSUR_H(_D8, _D8, _D12, _D10UU, _N(1));
	LEA(_A3, [_A3] 8);
	MADDSUR_H(_D9, _D9, _D13, _D11UU, _N(1));
	ST_D([_A2]-8, _E6);
	ST_D([_A3]-8, _E8);
	LEA(_A2, [_A2] 8);
	LEA(_A3, [_A3] 8);
	SHA_H(_D1, _D1, _N(2));
	MOV_A(_A2, _N(1));

IFXASM_LABEL(radix4);
	MOV_AA(_A3,_A5);
	MOV_AA(_A7,_A4);
	MOV_AA(_A6,_A3);
	LD_W(_D2,[_A3+]0x4);
	LD_W(_D4,[_A3]0xfc);
	LD_W(_D6,[_A3]0x1fc);
	LD_W(_D8,[_A3]0x2fc);
	LEA(_A12,0x3f);

IFXASM_LABEL(df1);
	MULR_H(_D2,_D2,_D0LL,_N(0x1));
	ST_W([_A7],_D3);
	MULR_H(_D4,_D4,_D0LL,_N(0x1));
	ST_W([_A7]0x100,_D5);
	MULR_H(_D6,_D6,_D0LL,_N(0x1));
	ST_W([_A7]0x200,_D7);
	MULR_H(_D8,_D8,_D0LL,_N(0x1));
	ST_W([_A7]0x300,_D9);
	MSUBR_H(_D10,_D2,_D6,_D1LL,_N(0x1));
	MADDR_H(_D11,_D2,_D6,_D1LL,_N(0x1));
	MOV_AA(_A7,_A6);
	MSUBR_H(_D12,_D4,_D8,_D1LL,_N(0x1));
	MOV_AA(_A6,_A3);
	MADDR_H(_D13,_D4,_D8,_D1LL,_N(0x1));
	LD_W(_D2,[_A3+]0x4);
	MSUBR_H(_D3,_D10,_D12,_D1LL,_N(0x1));
	LD_W(_D4,[_A3]0xfc);
	MADDSUR_H(_D5,_D11,_D13,_D1UU,_N(0x1));
	LD_W(_D6,[_A3]0x1fc);
	MADDR_H(_D7,_D10,_D12,_D1LL,_N(0x1));
	LD_W(_D8,[_A3]0x2fc);
	MSUBADR_H(_D9,_D11,_D13,_D1UU,_N(0x1));
	LOOP(_A12,df1);
	ST_W([_A7],_D3);
	ST_W([_A7]0x100,_D5);
	ST_W([_A7]0x200,_D7);
	ST_W([_A7]0x300,_D9);
	MOV_AA(_A3,_A5);
	MOV_AA(_A7,_A4);
	MOV_AA(_A6,_A3);
	LD_W(_D2,[_A3+]0x4);
	LD_W(_D4,[_A3]0x3c);
	LD_W(_D6,[_A3]0x7c);
	LD_W(_D8,[_A3]0xbc);
	MOV_A(_A12,_N(0xe));

IFXASM_LABEL(df2_notwiddle);
	MULR_H(_D2,_D2,_D0LL,_N(0x1));
	ST_W([_A7],_D3);
	MULR_H(_D4,_D4,_D0LL,_N(0x1));
	ST_W([_A7]0x40,_D5);
	MULR_H(_D6,_D6,_D0LL,_N(0x1));
	ST_W([_A7]0x80,_D7);
	MULR_H(_D8,_D8,_D0LL,_N(0x1));
	ST_W([_A7]0xc0,_D9);
	MSUBR_H(_D10,_D2,_D6,_D1LL,_N(0x1));
	MADDR_H(_D11,_D2,_D6,_D1LL,_N(0x1));
	MOV_AA(_A7,_A6);
	MSUBR_H(_D12,_D4,_D8,_D1LL,_N(0x1));
	MOV_AA(_A6,_A3);
	MADDR_H(_D13,_D4,_D8,_D1LL,_N(0x1));
	LD_W(_D2,[_A3+]0x4);
	MSUBR_H(_D3,_D10,_D12,_D1LL,_N(0x1));
	LD_W(_D4,[_A3]0x3c);
	MADDSUR_H(_D5,_D11,_D13,_D1UU,_N(0x1));
	LD_W(_D6,[_A3]0x7c);
	MADDR_H(_D7,_D10,_D12,_D1LL,_N(0x1));
	LD_W(_D8,[_A3]0xbc);
	MSUBADR_H(_D9,_D11,_D13,_D1UU,_N(0x1));
	LOOP(_A12,df2_notwiddle);
	MOVH_A(_A12,_HI(ptwiddle));
	LEA(_A12,[_A12]_LO(ptwiddle));
	LEA(_A12,[_A12]0xc);
	MULR_H(_D2,_D2,_D0LL,_N(0x1));
	ST_W([_A7],_D3);
	MULR_H(_D4,_D4,_D0LL,_N(0x1));
	ST_W([_A7]0x40,_D5);
	MULR_H(_D6,_D6,_D0LL,_N(0x1));
	ST_W([_A7]0x80,_D7);
	MULR_H(_D8,_D8,_D0LL,_N(0x1));
	ST_W([_A7]0xc0,_D9);
	MSUBR_H(_D10,_D2,_D6,_D1LL,_N(0x1));
	LEA(_A3,[_A3]0xc0);
	MADDR_H(_D11,_D2,_D6,_D1LL,_N(0x1));
	MOV_AA(_A7,_A6);
	MSUBR_H(_D12,_D4,_D8,_D1LL,_N(0x1));
	MOV_AA(_A6,_A3);
	MADDR_H(_D13,_D4,_D8,_D1LL,_N(0x1));
	LD_W(_D2,[_A3+]0x4);
	MSUBR_H(_D3,_D10,_D12,_D1LL,_N(0x1));
	LD_W(_D4,[_A3]0x3c);
	MADDSUR_H(_D5,_D11,_D13,_D1UU,_N(0x1));
	LD_W(_D6,[_A3]0x7c);
	MADDR_H(_D7,_D10,_D12,_D1LL,_N(0x1));
	LD_W(_D8,[_A3]0xbc);
	MSUBADR_H(_D9,_D11,_D13,_D1UU,_N(0x1));
	MOV_A(_A13,_N(0x2));

IFXASM_LABEL(df2_twiddle_outer);
	MOV_A(_A14,_N(0xe));

IFXASM_LABEL(df2_twiddle_inner);
	MULR_H(_D2,_D2,_D0LL,_N(0x1));
	LD_D(_E10,[_A12]0x0);
	MULR_H(_D12,_D4,_D10LL,_N(0x0));
	ST_W([_A7],_D3);
	MADDSUR_H(_D4,_D12,_D4,_D10UU,_N(0x0));
	ST_W([_A7]0x40,_D5);
	MULR_H(_D12,_D6,_D11LL,_N(0x0));
	ST_W([_A7]0x80,_D7);
	MADDSUR_H(_D6,_D12,_D6,_D11UU,_N(0x0));
	LD_W(_D13,[_A12]0x8);
	MULR_H(_D12,_D8,_D13LL,_N(0x0));
	ST_W([_A7]0xc0,_D9);
	MADDSUR_H(_D8,_D12,_D8,_D13UU,_N(0x0));
	MSUBR_H(_D10,_D2,_D6,_D1LL,_N(0x1));
	MADDR_H(_D11,_D2,_D6,_D1LL,_N(0x1));
	MOV_AA(_A7,_A6);
	MSUBR_H(_D12,_D4,_D8,_D1LL,_N(0x1));
	MOV_AA(_A6,_A3);
	MADDR_H(_D13,_D4,_D8,_D1LL,_N(0x1));
	LD_W(_D2,[_A3+]0x4);
	MSUBR_H(_D3,_D10,_D12,_D1LL,_N(0x1));
	LD_W(_D4,[_A3]0x3c);
	MADDSUR_H(_D5,_D11,_D13,_D1UU,_N(0x1));
	LD_W(_D6,[_A3]0x7c);
	MADDR_H(_D7,_D10,_D12,_D1LL,_N(0x1));
	LD_W(_D8,[_A3]0xbc);
	MSUBADR_H(_D9,_D11,_D13,_D1UU,_N(0x1));
	LOOP(_A14,df2_twiddle_inner);
	MULR_H(_D2,_D2,_D0LL,_N(0x1));
	LD_D(_E10,[_A12+]0xc);
	MULR_H(_D12,_D4,_D10LL,_N(0x0));
	ST_W([_A7],_D3);
	MADDSUR_H(_D4,_D12,_D4,_D10UU,_N(0x0));
	ST_W([_A7]0x40,_D5);
	MULR_H(_D12,_D6,_D11LL,_N(0x0));
	ST_W([_A7]0x80,_D7);
	MADDSUR_H(_D6,_D12,_D6,_D11UU,_N(0x0));
	LD_W(_D13,[_A12]-0x4);
	MULR_H(_D12,_D8,_D13LL,_N(0x0));
	ST_W([_A7]0xc0,_D9);
	MADDSUR_H(_D8,_D12,_D8,_D13UU,_N(0x0));
	MSUBR_H(_D10,_D2,_D6,_D1LL,_N(0x1));
	LEA(_A3,[_A3]0xc0);
	MADDR_H(_D11,_D2,_D6,_D1LL,_N(0x1));
	MOV_AA(_A7,_A6);
	MSUBR_H(_D12,_D4,_D8,_D1LL,_N(0x1));
	MOV_AA(_A6,_A3);
	MADDR_H(_D13,_D4,_D8,_D1LL,_N(0x1));
	LD_W(_D2,[_A3+]0x4);
	MSUBR_H(_D3,_D10,_D12,_D1LL,_N(0x1));
	LD_W(_D4,[_A3]0x3c);
	MADDSUR_H(_D5,_D11,_D13,_D1UU,_N(0x1));
	LD_W(_D6,[_A3]0x7c);
	MADDR_H(_D7,_D10,_D12,_D1LL,_N(0x1));
	LD_W(_D8,[_A3]0xbc);
	MSUBADR_H(_D9,_D11,_D13,_D1UU,_N(0x1));
	LOOP(_A13,df2_twiddle_outer);
	ST_W([_A7],_D3);
	ST_W([_A7]0x40,_D5);
	ST_W([_A7]0x80,_D7);
	ST_W([_A7]0xc0,_D9);
	MOV_AA(_A3,_A5);
	MOV_AA(_A7,_A4);
	MOV_AA(_A6,_A3);
	LD_W(_D2,[_A3+]0x4);
	LD_W(_D4,[_A3]0xc);
	LD_W(_D6,[_A3]0x1c);
	LD_W(_D8,[_A3]0x2c);
	MOV_A(_A12,_N(0x2));

IFXASM_LABEL(df3_notwiddle);
	MULR_H(_D2,_D2,_D0LL,_N(0x1));
	ST_W([_A7],_D3);
	MULR_H(_D4,_D4,_D0LL,_N(0x1));
	ST_W([_A7]0x10,_D5);
	MULR_H(_D6,_D6,_D0LL,_N(0x1));
	ST_W([_A7]0x20,_D7);
	MULR_H(_D8,_D8,_D0LL,_N(0x1));
	ST_W([_A7]0x30,_D9);
	MSUBR_H(_D10,_D2,_D6,_D1LL,_N(0x1));
	MADDR_H(_D11,_D2,_D6,_D1LL,_N(0x1));
	MOV_AA(_A7,_A6);
	MSUBR_H(_D12,_D4,_D8,_D1LL,_N(0x1));
	MOV_AA(_A6,_A3);
	MADDR_H(_D13,_D4,_D8,_D1LL,_N(0x1));
	LD_W(_D2,[_A3+]0x4);
	MSUBR_H(_D3,_D10,_D12,_D1LL,_N(0x1));
	LD_W(_D4,[_A3]0xc);
	MADDSUR_H(_D5,_D11,_D13,_D1UU,_N(0x1));
	LD_W(_D6,[_A3]0x1c);
	MADDR_H(_D7,_D10,_D12,_D1LL,_N(0x1));
	LD_W(_D8,[_A3]0x2c);
	MSUBADR_H(_D9,_D11,_D13,_D1UU,_N(0x1));
	LOOP(_A12,df3_notwiddle);
	MOVH_A(_A12,_HI(ptwiddle));
	LEA(_A12,[_A12]_LO(ptwiddle));
	LEA(_A12,[_A12]0xc);
	MULR_H(_D2,_D2,_D0LL,_N(0x1));
	ST_W([_A7],_D3);
	MULR_H(_D4,_D4,_D0LL,_N(0x1));
	ST_W([_A7]0x10,_D5);
	MULR_H(_D6,_D6,_D0LL,_N(0x1));
	ST_W([_A7]0x20,_D7);
	MULR_H(_D8,_D8,_D0LL,_N(0x1));
	ST_W([_A7]0x30,_D9);
	MSUBR_H(_D10,_D2,_D6,_D1LL,_N(0x1));
	LEA(_A3,[_A3]0x30);
	MADDR_H(_D11,_D2,_D6,_D1LL,_N(0x1));
	MOV_AA(_A7,_A6);
	MSUBR_H(_D12,_D4,_D8,_D1LL,_N(0x1));
	MOV_AA(_A6,_A3);
	MADDR_H(_D13,_D4,_D8,_D1LL,_N(0x1));
	LD_W(_D2,[_A3+]0x4);
	MSUBR_H(_D3,_D10,_D12,_D1LL,_N(0x1));
	LD_W(_D4,[_A3]0xc);
	MADDSUR_H(_D5,_D11,_D13,_D1UU,_N(0x1));
	LD_W(_D6,[_A3]0x1c);
	MADDR_H(_D7,_D10,_D12,_D1LL,_N(0x1));
	LD_W(_D8,[_A3]0x2c);
	MSUBADR_H(_D9,_D11,_D13,_D1UU,_N(0x1));
	MOV_A(_A13,_N(0xe));

IFXASM_LABEL(df3_twiddle_outer);
	MOV_A(_A14,_N(0x2));

IFXASM_LABEL(df3_twiddle_inner);
	MULR_H(_D2,_D2,_D0LL,_N(0x1));
	LD_D(_E10,[_A12]0x0);
	MULR_H(_D12,_D4,_D10LL,_N(0x0));
	ST_W([_A7],_D3);
	MADDSUR_H(_D4,_D12,_D4,_D10UU,_N(0x0));
	ST_W([_A7]0x10,_D5);
	MULR_H(_D12,_D6,_D11LL,_N(0x0));
	ST_W([_A7]0x20,_D7);
	MADDSUR_H(_D6,_D12,_D6,_D11UU,_N(0x0));
	LD_W(_D13,[_A12]0x8);
	MULR_H(_D12,_D8,_D13LL,_N(0x0));
	ST_W([_A7]0x30,_D9);
	MADDSUR_H(_D8,_D12,_D8,_D13UU,_N(0x0));
	MSUBR_H(_D10,_D2,_D6,_D1LL,_N(0x1));
	MADDR_H(_D11,_D2,_D6,_D1LL,_N(0x1));
	MOV_AA(_A7,_A6);
	MSUBR_H(_D12,_D4,_D8,_D1LL,_N(0x1));
	MOV_AA(_A6,_A3);
	MADDR_H(_D13,_D4,_D8,_D1LL,_N(0x1));
	LD_W(_D2,[_A3+]0x4);
	MSUBR_H(_D3,_D10,_D12,_D1LL,_N(0x1));
	LD_W(_D4,[_A3]0xc);
	MADDSUR_H(_D5,_D11,_D13,_D1UU,_N(0x1));
	LD_W(_D6,[_A3]0x1c);
	MADDR_H(_D7,_D10,_D12,_D1LL,_N(0x1));
	LD_W(_D8,[_A3]0x2c);
	MSUBADR_H(_D9,_D11,_D13,_D1UU,_N(0x1));
	LOOP(_A14,df3_twiddle_inner);
	MULR_H(_D2,_D2,_D0LL,_N(0x1));
	LD_D(_E10,[_A12+]0xc);
	MULR_H(_D12,_D4,_D10LL,_N(0x0));
	ST_W([_A7],_D3);
	MADDSUR_H(_D4,_D12,_D4,_D10UU,_N(0x0));
	ST_W([_A7]0x10,_D5);
	MULR_H(_D12,_D6,_D11LL,_N(0x0));
	ST_W([_A7]0x20,_D7);
	MADDSUR_H(_D6,_D12,_D6,_D11UU,_N(0x0));
	LD_W(_D13,[_A12]-0x4);
	MULR_H(_D12,_D8,_D13LL,_N(0x0));
	ST_W([_A7]0x30,_D9);
	MADDSUR_H(_D8,_D12,_D8,_D13UU,_N(0x0));
	MSUBR_H(_D10,_D2,_D6,_D1LL,_N(0x1));
	LEA(_A3,[_A3]0x30);
	MADDR_H(_D11,_D2,_D6,_D1LL,_N(0x1));
	MOV_AA(_A7,_A6);
	MSUBR_H(_D12,_D4,_D8,_D1LL,_N(0x1));
	MOV_AA(_A6,_A3);
	MADDR_H(_D13,_D4,_D8,_D1LL,_N(0x1));
	LD_W(_D2,[_A3+]0x4);
	MSUBR_H(_D3,_D10,_D12,_D1LL,_N(0x1));
	LD_W(_D4,[_A3]0xc);
	MADDSUR_H(_D5,_D11,_D13,_D1UU,_N(0x1));
	LD_W(_D6,[_A3]0x1c);
	MADDR_H(_D7,_D10,_D12,_D1LL,_N(0x1));
	LD_W(_D8,[_A3]0x2c);
	MSUBADR_H(_D9,_D11,_D13,_D1UU,_N(0x1));
	LOOP(_A13,df3_twiddle_outer);
	ST_W([_A7],_D3);
	ST_W([_A7]0x10,_D5);
	ST_W([_A7]0x20,_D7);
	ST_W([_A7]0x30,_D9);
	SHA_H(_D0,_D0,_N(0x1));
	MOV_AA(_A3,_A5);
	MOV_AA(_A12,_A4);
	MOV_AA(_A7,_A4);
	MOVH_A(_A13,_HI(etwiddle));
	LEA(_A13,[_A13]_LO(etwiddle));
	MOVH_A(_A14,_HI(shuffle));
	LEA(_A14,[_A14]_LO(shuffle));
	MOV_AA(_A6,_A12);
	LD_W(_D2,[_A3+]0x10);
	LD_W(_D4,[_A3]-0xc);
	LD_W(_D6,[_A3]-0x8);
	LD_W(_D8,[_A3]-0x4);
	LEA(_A15,0x3f);

IFXASM_LABEL(df4);
	MULR_H(_D2,_D2,_D0LL,_N(0x1));
	LD_D(_E10,[_A13+]0xc);
	MULR_H(_D12,_D4,_D10LL,_N(0x0));
	ST_W([_A7],_D3);
	MADDSUR_H(_D4,_D12,_D4,_D10UU,_N(0x0));
	ST_W([_A7]0x200,_D5);
	MULR_H(_D12,_D6,_D11LL,_N(0x0));
	ST_W([_A7]0x400,_D7);
	MADDSUR_H(_D6,_D12,_D6,_D11UU,_N(0x0));
	LD_W(_D13,[_A13]-0x4);
	MULR_H(_D12,_D8,_D13LL,_N(0x0));
	ST_W([_A7]0x600,_D9);
	MADDSUR_H(_D8,_D12,_D8,_D13UU,_N(0x0));
	LD_W(_D10,[_A14+]0x4);
	MSUBR_H(_D11,_D2,_D6,_D1LL,_N(0x1));
	MADDR_H(_D12,_D2,_D6,_D1LL,_N(0x1));
	ADDSC_A(_A7,_A6,_D10,_N(0x3));
	MSUBR_H(_D13,_D4,_D8,_D1LL,_N(0x1));
	MOV_AA(_A6,_A12);
	MADDR_H(_D14,_D4,_D8,_D1LL,_N(0x1));
	LD_W(_D2,[_A3+]0x10);
	MSUBR_H(_D3,_D11,_D13,_D1LL,_N(0x1));
	LD_W(_D4,[_A3]-0xc);
	MADDSUR_H(_D5,_D12,_D14,_D1UU,_N(0x1));
	LD_W(_D6,[_A3]-0x8);
	MADDR_H(_D7,_D11,_D13,_D1LL,_N(0x1));
	LD_W(_D8,[_A3]-0x4);
	MSUBADR_H(_D9,_D12,_D14,_D1UU,_N(0x1));
	LOOP(_A15,df4);
	ST_W([_A7],_D3);
	ST_W([_A7]0x200,_D5);
	ST_W([_A7]0x400,_D7);
	ST_W([_A7]0x600,_D9);
	ADD_A(_A4,_N(0x4));
	SHA_H(_D0,_D0,_N(-0x1));
	LEA(_A5,[_A5]0x400);
	LOOP(_A2,radix4);
	ADD_A(_A4,_N(-0x8));
	LEA(_A5,[_A5]-0x800);
	RET();


}
